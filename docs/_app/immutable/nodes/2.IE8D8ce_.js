import{A as je,B as qe,C as pe,D as Ve,s as X,f as k,a as O,g as T,h as I,E as j,c as C,d as L,j as c,i as B,x as p,F as H,y as z,G as Z,H as Se,k as b,I as D,J as K,K as Oe,l as Ne,m as He,n as Re,e as ye,o as Fe,p as Q,L as ge,M as ne}from"../chunks/scheduler.hdNUFy2D.js";import{g as ze,t as V,c as Be,a as F,S as ee,i as te,f as re,b as ie,d as se,m as ae,e as oe}from"../chunks/index.2nKtRfP8.js";function Ce(n,e){const t=e.token={};function r(s,i,a,o){if(e.token!==t)return;e.resolved=o;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const _=s&&(e.current=s)(l);let x=!1;e.block&&(e.blocks?e.blocks.forEach((u,m)=>{m!==i&&u&&(ze(),V(u,1,1,()=>{e.blocks[m]===u&&(e.blocks[m]=null)}),Be())}):e.block.d(1),_.c(),F(_,1),_.m(e.mount(),e.anchor),x=!0),e.block=_,e.blocks&&(e.blocks[i]=_),x&&Ve()}if(je(n)){const s=qe();if(n.then(i=>{pe(s),r(e.then,1,e.value,i),pe(null)},i=>{if(pe(s),r(e.catch,2,e.error,i),pe(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function We(n,e,t){const r=e.slice(),{resolved:s}=n;n.current===n.then&&(r[n.value]=s),n.current===n.catch&&(r[n.error]=s),n.block.p(r,t)}function Ge(n){let e,t,r='<span class="material-symbols-outlined svelte-zmevxb">navigate_before</span>',s,i,a='<span class="material-symbols-outlined svelte-zmevxb">play_arrow</span>',o,l,_='<span class="material-symbols-outlined svelte-zmevxb">stop</span>',x,u,m='<span class="material-symbols-outlined svelte-zmevxb">pause</span>',v,f,g='<span class="material-symbols-outlined svelte-zmevxb">navigate_next</span>',w,P;return{c(){e=k("div"),t=k("button"),t.innerHTML=r,s=O(),i=k("button"),i.innerHTML=a,o=O(),l=k("button"),l.innerHTML=_,x=O(),u=k("button"),u.innerHTML=m,v=O(),f=k("button"),f.innerHTML=g,this.h()},l(R){e=T(R,"DIV",{id:!0,class:!0});var h=I(e);t=T(h,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(t)!=="svelte-l4t4zq"&&(t.innerHTML=r),s=C(h),i=T(h,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(i)!=="svelte-w43bq6"&&(i.innerHTML=a),o=C(h),l=T(h,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(l)!=="svelte-13vtwoq"&&(l.innerHTML=_),x=C(h),u=T(h,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(u)!=="svelte-e21jg0"&&(u.innerHTML=m),v=C(h),f=T(h,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(f)!=="svelte-uevd98"&&(f.innerHTML=g),h.forEach(L),this.h()},h(){c(t,"id","bar_prev_button"),c(t,"class","svelte-zmevxb"),c(i,"id","play_button"),c(i,"class","svelte-zmevxb"),c(l,"id","stop_button"),c(l,"class","svelte-zmevxb"),c(u,"id","pause_button"),c(u,"class","svelte-zmevxb"),c(f,"id","bar_next_button"),c(f,"class","svelte-zmevxb"),c(e,"id","transport"),c(e,"class","svelte-zmevxb")},m(R,h){B(R,e,h),p(e,t),p(e,s),p(e,i),p(e,o),p(e,l),p(e,x),p(e,u),p(e,v),p(e,f),w||(P=[H(t,"click",n[0]),H(i,"click",n[2]),H(l,"click",n[3]),H(u,"click",n[4]),H(f,"click",n[1])],w=!0)},p:z,i:z,o:z,d(R){R&&L(e),w=!1,Z(P)}}}function $e(n){const e=Se();function t(){e("prevbar")}function r(){e("nextbar")}function s(){e("play")}function i(){e("stop")}function a(){e("pause")}return[t,r,s,i,a]}class Je extends ee{constructor(e){super(),te(this,e,$e,Ge,X,{})}}function Ke(n){let e,t,r="<ruby>速<rt>はや</rt></ruby>さ:",s,i,a,o,l,_,x,u,m,v;return{c(){e=k("span"),t=k("label"),t.innerHTML=r,s=O(),i=k("div"),a=k("datalist"),o=k("option"),l=k("option"),_=k("option"),x=O(),u=k("input"),this.h()},l(f){e=T(f,"SPAN",{});var g=I(e);t=T(g,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),j(t)!=="svelte-5u4gq2"&&(t.innerHTML=r),s=C(g),i=T(g,"DIV",{style:!0});var w=I(i);a=T(w,"DATALIST",{id:!0,class:!0});var P=I(a);o=T(P,"OPTION",{label:!0,class:!0}),I(o).forEach(L),l=T(P,"OPTION",{label:!0,class:!0}),I(l).forEach(L),_=T(P,"OPTION",{label:!0,class:!0}),I(_).forEach(L),P.forEach(L),x=C(w),u=T(w,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),w.forEach(L),g.forEach(L),this.h()},h(){c(t,"for","slider"),b(t,"font-size","medium"),o.__value="0.5",D(o,o.__value),c(o,"label","おそい"),c(o,"class","svelte-fa9n55"),l.__value="1.0",D(l,l.__value),c(l,"label","ふつう"),c(l,"class","svelte-fa9n55"),_.__value="1.5",D(_,_.__value),c(_,"label","はやい"),c(_,"class","svelte-fa9n55"),c(a,"id","speed_values"),c(a,"class","svelte-fa9n55"),b(u,"width","180px"),c(u,"type","range"),c(u,"id","slider"),c(u,"list","speed_values"),c(u,"min","0.5"),c(u,"max","1.5"),c(u,"step","0.1"),b(i,"display","inline-block")},m(f,g){B(f,e,g),p(e,t),p(e,s),p(e,i),p(i,a),p(a,o),p(a,l),p(a,_),p(i,x),p(i,u),D(u,n[0]),m||(v=[H(u,"change",n[1]),H(u,"input",n[1])],m=!0)},p(f,[g]){g&1&&D(u,f[0])},i:z,o:z,d(f){f&&L(e),m=!1,Z(v)}}}function Ye(n,e,t){let{speed:r=1}=e;function s(){r=K(this.value),t(0,r)}return n.$$set=i=>{"speed"in i&&t(0,r=i.speed)},[r,s]}class Qe extends ee{constructor(e){super(),te(this,e,Ye,Ke,X,{speed:0})}}function Xe(n){let e,t,r="<ruby>表示量<rt>ひょうじりょう</rt></ruby>:",s,i,a,o,l,_,x,u,m,v;return{c(){e=k("span"),t=k("label"),t.innerHTML=r,s=O(),i=k("div"),a=k("datalist"),o=k("option"),l=k("option"),_=k("option"),x=O(),u=k("input"),this.h()},l(f){e=T(f,"SPAN",{});var g=I(e);t=T(g,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),j(t)!=="svelte-evxx65"&&(t.innerHTML=r),s=C(g),i=T(g,"DIV",{style:!0});var w=I(i);a=T(w,"DATALIST",{id:!0,class:!0});var P=I(a);o=T(P,"OPTION",{label:!0,class:!0}),I(o).forEach(L),l=T(P,"OPTION",{label:!0,class:!0}),I(l).forEach(L),_=T(P,"OPTION",{label:!0,class:!0}),I(_).forEach(L),P.forEach(L),x=C(w),u=T(w,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),w.forEach(L),g.forEach(L),this.h()},h(){c(t,"for","display_slider"),b(t,"font-size","medium"),o.__value="1.0",D(o,o.__value),c(o,"label","すくない"),c(o,"class","svelte-fa9n55"),l.__value="3.0",D(l,l.__value),c(l,"label","ふつう"),c(l,"class","svelte-fa9n55"),_.__value="5.0",D(_,_.__value),c(_,"label","おおい"),c(_,"class","svelte-fa9n55"),c(a,"id","display_values"),c(a,"class","svelte-fa9n55"),b(u,"width","180px"),c(u,"type","range"),c(u,"id","display_slider"),c(u,"list","display_values"),c(u,"min","1.0"),c(u,"max","5.0"),c(u,"step","0.1"),b(i,"display","inline-block")},m(f,g){B(f,e,g),p(e,t),p(e,s),p(e,i),p(i,a),p(a,o),p(a,l),p(a,_),p(i,x),p(i,u),D(u,n[0]),m||(v=[H(u,"change",n[1]),H(u,"input",n[1])],m=!0)},p(f,[g]){g&1&&D(u,f[0])},i:z,o:z,d(f){f&&L(e),m=!1,Z(v)}}}function Ze(n,e,t){let{display:r=3}=e;function s(){r=K(this.value),t(0,r)}return n.$$set=i=>{"display"in i&&t(0,r=i.display)},[r,s]}class et extends ee{constructor(e){super(),te(this,e,Ze,Xe,X,{display:0})}}function tt(n){let e,t,r="<ruby>繰<rt>く</rt></ruby>り<ruby>返<rt>かえ</rt></ruby>し:",s,i,a,o,l,_="<ruby>範囲<rt>はんい</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",x,u,m,v,f="ー",g,w,P,R;return{c(){e=k("span"),t=k("label"),t.innerHTML=r,s=O(),i=k("input"),a=O(),o=k("span"),l=k("label"),l.innerHTML=_,x=O(),u=k("input"),m=O(),v=k("labe"),v.textContent=f,g=O(),w=k("input"),this.h()},l(h){e=T(h,"SPAN",{style:!0});var S=I(e);t=T(S,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),j(t)!=="svelte-xvcnro"&&(t.innerHTML=r),s=C(S),i=T(S,"INPUT",{id:!0,type:!0,style:!0}),a=C(S),o=T(S,"SPAN",{class:!0});var U=I(o);l=T(U,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),j(l)!=="svelte-1omed3k"&&(l.innerHTML=_),x=C(U),u=T(U,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),m=C(U),v=T(U,"LABE",{style:!0,"data-svelte-h":!0}),j(v)!=="svelte-15jvtlh"&&(v.textContent=f),g=C(U),w=T(U,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),U.forEach(L),S.forEach(L),this.h()},h(){c(t,"for","region_loop_check"),b(t,"font-size","medium"),c(i,"id","region_loop_check"),c(i,"type","checkbox"),b(i,"margin","0px"),b(i,"width","32px"),b(i,"height","32px"),c(l,"for","min_loop"),b(l,"margin-left","8px"),b(l,"margin-right","0px"),b(l,"font-size","medium"),c(u,"type","number"),c(u,"id","min_loop"),c(u,"min","1"),c(u,"step","1"),u.required=!0,b(u,"margin","0px"),b(u,"width","48px"),b(u,"text-align","center"),b(u,"font-size","large"),b(v,"margin","4px"),b(v,"font-size","small"),c(w,"type","number"),c(w,"id","max_loop"),c(w,"min","1"),c(w,"step","1"),w.required=!0,b(w,"margin","0px"),b(w,"width","48px"),b(w,"text-align","center"),b(w,"font-size","large"),c(o,"class","svelte-1jbmgfw"),Oe(o,"hidden",n[0]===!1),b(e,"display","flex"),b(e,"align-items","center")},m(h,S){B(h,e,S),p(e,t),p(e,s),p(e,i),i.checked=n[0],p(e,a),p(e,o),p(o,l),p(o,x),p(o,u),D(u,n[1]),p(o,m),p(o,v),p(o,g),p(o,w),D(w,n[2]),P||(R=[H(i,"change",n[3]),H(u,"input",n[4]),H(w,"input",n[5])],P=!0)},p(h,[S]){S&1&&(i.checked=h[0]),S&2&&K(u.value)!==h[1]&&D(u,h[1]),S&4&&K(w.value)!==h[2]&&D(w,h[2]),S&1&&Oe(o,"hidden",h[0]===!1)},i:z,o:z,d(h){h&&L(e),P=!1,Z(R)}}}function nt(n,e,t){let{enable:r=!1}=e,{begin:s=1}=e,{end:i=1}=e;function a(){r=this.checked,t(0,r)}function o(){s=K(this.value),t(1,s)}function l(){i=K(this.value),t(2,i)}return n.$$set=_=>{"enable"in _&&t(0,r=_.enable),"begin"in _&&t(1,s=_.begin),"end"in _&&t(2,i=_.end)},[r,s,i,a,o,l]}class rt extends ee{constructor(e){super(),te(this,e,nt,tt,X,{enable:0,begin:1,end:2})}}function it(n){let e,t,r="<ruby>再生位置<rt>さいせいいち</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",s,i,a=n[0]+1+"",o,l,_,x,u;return{c(){e=k("span"),t=k("label"),t.innerHTML=r,s=O(),i=k("label"),o=Ne(a),l=O(),_=k("input"),this.h()},l(m){e=T(m,"SPAN",{style:!0});var v=I(e);t=T(v,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),j(t)!=="svelte-1g3f3rb"&&(t.innerHTML=r),s=C(v),i=T(v,"LABEL",{for:!0,id:!0,style:!0});var f=I(i);o=He(f,a),f.forEach(L),l=C(v),_=T(v,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0,style:!0}),v.forEach(L),this.h()},h(){c(t,"for","bar_slider"),b(t,"margin-left","4px"),b(t,"font-size","medium"),c(i,"for","bar_slider"),c(i,"id","bar_label"),b(i,"width","48px"),b(i,"text-align","center"),b(i,"font-size","large"),c(_,"type","range"),c(_,"id","bar_slider"),c(_,"min","0"),c(_,"max",n[1]),c(_,"step","1"),b(_,"flex-grow","1"),b(_,"padding","0px"),b(e,"display","flex"),b(e,"align-items","center")},m(m,v){B(m,e,v),p(e,t),p(e,s),p(e,i),p(i,o),p(e,l),p(e,_),D(_,n[0]),x||(u=[H(_,"input",n[2]),H(_,"change",n[3]),H(_,"input",n[3])],x=!0)},p(m,[v]){v&1&&a!==(a=m[0]+1+"")&&Re(o,a),v&2&&c(_,"max",m[1]),v&1&&D(_,m[0])},i:z,o:z,d(m){m&&L(e),x=!1,Z(u)}}}function st(n,e,t){const r=Se();function s(l){r("input",{value:l.target.valueAsNumber})}let{value:i=0}=e,{max:a=100}=e;function o(){i=K(this.value),t(0,i)}return n.$$set=l=>{"value"in l&&t(0,i=l.value),"max"in l&&t(1,a=l.max)},[i,a,s,o]}class at extends ee{constructor(e){super(),te(this,e,st,it,X,{value:0,max:1})}}const ot=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:void 0;let M;const q=new Array(128).fill(void 0);q.push(void 0,null,!0,!1);function d(n){return q[n]}let ce=q.length;function lt(n){n<132||(q[n]=ce,ce=n)}function _e(n){const e=d(n);return lt(n),e}const De=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&De.decode();let le=null;function me(){return(le===null||le.byteLength===0)&&(le=new Uint8Array(M.memory.buffer)),le}function G(n,e){return n=n>>>0,De.decode(me().subarray(n,n+e))}function A(n){ce===q.length&&q.push(q.length+1);const e=ce;return ce=q[e],q[e]=n,e}function Pe(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const s=n.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=n.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(n)){const s=n.length;let i="[";s>0&&(i+=Pe(n[0]));for(let a=1;a<s;a++)i+=", "+Pe(n[a]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}let Ie=0;const we=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ut=typeof we.encodeInto=="function"?function(n,e){return we.encodeInto(n,e)}:function(n,e){const t=we.encode(n);return e.set(t),{read:n.length,written:t.length}};function ct(n,e,t){if(t===void 0){const o=we.encode(n),l=e(o.length,1)>>>0;return me().subarray(l,l+o.length).set(o),Ie=o.length,l}let r=n.length,s=e(r,1)>>>0;const i=me();let a=0;for(;a<r;a++){const o=n.charCodeAt(a);if(o>127)break;i[s+a]=o}if(a!==r){a!==0&&(n=n.slice(a)),s=t(s,r,r=a+n.length*3,1)>>>0;const o=me().subarray(s+a,s+r),l=ut(n,o);a+=l.written}return Ie=a,s}let ue=null;function ve(){return(ue===null||ue.byteLength===0)&&(ue=new Int32Array(M.memory.buffer)),ue}function _t(n,e,t,r){const s={a:n,b:e,cnt:1,dtor:t},i=(...a)=>{s.cnt++;const o=s.a;s.a=0;try{return r(o,s.b,...a)}finally{--s.cnt===0?M.__wbindgen_export_2.get(s.dtor)(o,s.b):s.a=o}};return i.original=s,i}function ft(n,e,t){M._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h978831c3e4267bae(n,e,A(t))}let he=128;function dt(n){if(he==1)throw new Error("out of js stack");return q[--he]=n,he}function N(n,e){try{return n.apply(this,e)}catch(t){M.__wbindgen_exn_store(A(t))}}function bt(n,e,t,r){M.wasm_bindgen__convert__closures__invoke2_mut__h04dd8e5622e8fd43(n,e,A(t),A(r))}class ke{static __wrap(e){e=e>>>0;const t=Object.create(ke.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();M.__wbg_randomaccessmidiplayer_free(e)}constructor(e){const t=M.randomaccessmidiplayer_new(A(e));return _e(t)}num_bars(){return M.randomaccessmidiplayer_num_bars(this.__wbg_ptr)>>>0}render_ahead_time(){return M.randomaccessmidiplayer_render_ahead_time(this.__wbg_ptr)}set_render_ahead_time(e){M.randomaccessmidiplayer_set_render_ahead_time(this.__wbg_ptr,e)}time_per_pixel(e,t){return M.randomaccessmidiplayer_time_per_pixel(this.__wbg_ptr,e,t)}current_bar(){return M.randomaccessmidiplayer_current_bar(this.__wbg_ptr)>>>0}start(){M.randomaccessmidiplayer_start(this.__wbg_ptr)}set_loop_region(e,t){M.randomaccessmidiplayer_set_loop_region(this.__wbg_ptr,e,t)}seek_at_bar(e,t){M.randomaccessmidiplayer_seek_at_bar(this.__wbg_ptr,e,t)}seek_at_time(e,t){M.randomaccessmidiplayer_seek_at_time(this.__wbg_ptr,e,t)}skip(e,t){M.randomaccessmidiplayer_skip(this.__wbg_ptr,e,t)}stop(){M.randomaccessmidiplayer_stop(this.__wbg_ptr)}tick(e){M.randomaccessmidiplayer_tick(this.__wbg_ptr,e)}is_playing(){return M.randomaccessmidiplayer_is_playing(this.__wbg_ptr)!==0}draw(e,t,r,s,i){try{const l=M.__wbindgen_add_to_stack_pointer(-16);M.randomaccessmidiplayer_draw(l,this.__wbg_ptr,dt(e),t,r,s,i);var a=ve()[l/4+0],o=ve()[l/4+1];if(o)throw _e(a)}finally{M.__wbindgen_add_to_stack_pointer(16),q[he++]=void 0}}}async function pt(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function gt(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){_e(e)},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(G(e,t));return A(r)},n.wbg.__wbindgen_string_new=function(e,t){const r=G(e,t);return A(r)},n.wbg.__wbg_randomaccessmidiplayer_new=function(e){const t=ke.__wrap(e);return A(t)},n.wbg.__wbg_setstrokeStyle_1b4551387606453b=function(e,t){d(e).strokeStyle=d(t)},n.wbg.__wbg_setfillStyle_1ebd7d8f502888fa=function(e,t){d(e).fillStyle=d(t)},n.wbg.__wbg_setfont_a622e8f71fcc67bd=function(e,t,r){d(e).font=G(t,r)},n.wbg.__wbg_settextAlign_425d121bce67eea6=function(e,t,r){d(e).textAlign=G(t,r)},n.wbg.__wbg_settextBaseline_ff6ae71131150241=function(e,t,r){d(e).textBaseline=G(t,r)},n.wbg.__wbg_beginPath_5c4c10cc904edc64=function(e){d(e).beginPath()},n.wbg.__wbg_fill_854920f07573dffd=function(e){d(e).fill()},n.wbg.__wbg_stroke_d6cd6e7c98952ff8=function(e){d(e).stroke()},n.wbg.__wbg_lineTo_ef21aebc726bbda0=function(e,t,r){d(e).lineTo(t,r)},n.wbg.__wbg_moveTo_23c53eed282c0730=function(e,t,r){d(e).moveTo(t,r)},n.wbg.__wbg_roundRect_5bc558db0fe10790=function(){return N(function(e,t,r,s,i,a){d(e).roundRect(t,r,s,i,a)},arguments)},n.wbg.__wbg_clearRect_d976768ba14de6f9=function(e,t,r,s,i){d(e).clearRect(t,r,s,i)},n.wbg.__wbg_fillRect_ae135cf52671cb3d=function(e,t,r,s,i){d(e).fillRect(t,r,s,i)},n.wbg.__wbg_strokeRect_eb3d071a52abca07=function(e,t,r,s,i){d(e).strokeRect(t,r,s,i)},n.wbg.__wbg_strokeText_a4c0b8e18d53ea7f=function(){return N(function(e,t,r,s,i){d(e).strokeText(G(t,r),s,i)},arguments)},n.wbg.__wbg_connect_7374783233c39eda=function(){return N(function(e,t){const r=d(e).connect(d(t));return A(r)},arguments)},n.wbg.__wbg_disconnect_13e3b9054333eb88=function(){return N(function(e){d(e).disconnect()},arguments)},n.wbg.__wbg_gain_ea4961e006680142=function(e){const t=d(e).gain;return A(t)},n.wbg.__wbg_arrayBuffer_a9d862b05aaee2f9=function(e){const t=d(e).arrayBuffer();return A(t)},n.wbg.__wbg_threshold_3334a9415a751f8f=function(e){const t=d(e).threshold;return A(t)},n.wbg.__wbg_knee_26a66de96fcff3d9=function(e){const t=d(e).knee;return A(t)},n.wbg.__wbg_ratio_bf0caf07ef32a1b1=function(e){const t=d(e).ratio;return A(t)},n.wbg.__wbg_destination_4d44007f7d08d71b=function(e){const t=d(e).destination;return A(t)},n.wbg.__wbg_currentTime_d2be936586614ff4=function(e){return d(e).currentTime},n.wbg.__wbg_new_db252a952beaf4fa=function(){return N(function(){const e=new ot;return A(e)},arguments)},n.wbg.__wbg_close_b87bff143de234d5=function(){return N(function(e){const t=d(e).close();return A(t)},arguments)},n.wbg.__wbg_createDynamicsCompressor_831f19de62047bce=function(){return N(function(e){const t=d(e).createDynamicsCompressor();return A(t)},arguments)},n.wbg.__wbg_createGain_c702b552853e1a86=function(){return N(function(e){const t=d(e).createGain();return A(t)},arguments)},n.wbg.__wbg_createOscillator_33e2fb4cedf63575=function(){return N(function(e){const t=d(e).createOscillator();return A(t)},arguments)},n.wbg.__wbg_value_d7acd600733d8062=function(e){return d(e).value},n.wbg.__wbg_setvalue_6d68fd7da7d604f9=function(e,t){d(e).value=t},n.wbg.__wbg_exponentialRampToValueAtTime_5cdafb7091d2faf6=function(){return N(function(e,t,r){const s=d(e).exponentialRampToValueAtTime(t,r);return A(s)},arguments)},n.wbg.__wbg_linearRampToValueAtTime_d7663013272d6c74=function(){return N(function(e,t,r){const s=d(e).linearRampToValueAtTime(t,r);return A(s)},arguments)},n.wbg.__wbg_setTargetAtTime_70ccc68d17235e73=function(){return N(function(e,t,r,s){const i=d(e).setTargetAtTime(t,r,s);return A(i)},arguments)},n.wbg.__wbg_setValueAtTime_6460f895778e5046=function(){return N(function(e,t,r){const s=d(e).setValueAtTime(t,r);return A(s)},arguments)},n.wbg.__wbg_settype_523bfbd496f822de=function(e,t){d(e).type=_e(t)},n.wbg.__wbg_frequency_2dccb3ae0f823e46=function(e){const t=d(e).frequency;return A(t)},n.wbg.__wbg_start_58f106eeea44565c=function(){return N(function(e,t){d(e).start(t)},arguments)},n.wbg.__wbindgen_cb_drop=function(e){const t=_e(e).original;return t.cnt--==1?(t.a=0,!0):!1},n.wbg.__wbg_queueMicrotask_4d890031a6a5a50c=function(e){queueMicrotask(d(e))},n.wbg.__wbg_queueMicrotask_adae4bc085237231=function(e){const t=d(e).queueMicrotask;return A(t)},n.wbg.__wbindgen_is_function=function(e){return typeof d(e)=="function"},n.wbg.__wbg_newnoargs_c62ea9419c21fbac=function(e,t){const r=new Function(G(e,t));return A(r)},n.wbg.__wbg_call_90c26b09837aba1c=function(){return N(function(e,t){const r=d(e).call(d(t));return A(r)},arguments)},n.wbg.__wbg_self_f0e34d89f33b99fd=function(){return N(function(){const e=self.self;return A(e)},arguments)},n.wbg.__wbg_window_d3b084224f4774d7=function(){return N(function(){const e=window.window;return A(e)},arguments)},n.wbg.__wbg_globalThis_9caa27ff917c6860=function(){return N(function(){const e=globalThis.globalThis;return A(e)},arguments)},n.wbg.__wbg_global_35dfdd59a4da3e74=function(){return N(function(){const e=global.global;return A(e)},arguments)},n.wbg.__wbindgen_is_undefined=function(e){return d(e)===void 0},n.wbg.__wbg_call_5da1969d7cd31ccd=function(){return N(function(e,t,r){const s=d(e).call(d(t),d(r));return A(s)},arguments)},n.wbg.__wbg_new_60f57089c7563e81=function(e,t){try{var r={a:e,b:t},s=(a,o)=>{const l=r.a;r.a=0;try{return bt(l,r.b,a,o)}finally{r.a=l}};const i=new Promise(s);return A(i)}finally{r.a=r.b=0}},n.wbg.__wbg_resolve_6e1c6553a82f85b7=function(e){const t=Promise.resolve(d(e));return A(t)},n.wbg.__wbg_then_3ab08cd4fbb91ae9=function(e,t){const r=d(e).then(d(t));return A(r)},n.wbg.__wbg_then_8371cc12cfedc5a2=function(e,t,r){const s=d(e).then(d(t),d(r));return A(s)},n.wbg.__wbg_buffer_a448f833075b71ba=function(e){const t=d(e).buffer;return A(t)},n.wbg.__wbg_new_8f67e318f15d7254=function(e){const t=new Uint8Array(d(e));return A(t)},n.wbg.__wbg_set_2357bf09366ee480=function(e,t,r){d(e).set(d(t),r>>>0)},n.wbg.__wbg_length_1d25fa9e4ac21ce7=function(e){return d(e).length},n.wbg.__wbindgen_object_clone_ref=function(e){const t=d(e);return A(t)},n.wbg.__wbindgen_debug_string=function(e,t){const r=Pe(d(t)),s=ct(r,M.__wbindgen_malloc,M.__wbindgen_realloc),i=Ie;ve()[e/4+1]=i,ve()[e/4+0]=s},n.wbg.__wbindgen_throw=function(e,t){throw new Error(G(e,t))},n.wbg.__wbindgen_memory=function(){const e=M.memory;return A(e)},n.wbg.__wbindgen_closure_wrapper584=function(e,t,r){const s=_t(e,t,78,ft);return A(s)},n}function mt(n,e){return M=n.exports,Ue.__wbindgen_wasm_module=e,ue=null,le=null,M}async function Ue(n){if(M!==void 0)return M;typeof n>"u"&&(n=new URL(""+new URL("../assets/t0k0_audio_bg.5LwHvDjU.wasm",import.meta.url).href,import.meta.url));const e=gt();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await pt(await n,e);return mt(t,r)}function wt(n){let e,t,r,s={ctx:n,current:null,token:null,hasCatch:!0,pending:kt,then:vt,catch:yt,value:29,error:30,blocks:[,,,]};return Ce(t=n[6],s),{c(){e=ye(),s.block.c()},l(i){e=ye(),s.block.l(i)},m(i,a){B(i,e,a),s.block.m(i,s.anchor=a),s.mount=()=>e.parentNode,s.anchor=e,r=!0},p(i,a){n=i,s.ctx=n,a&64&&t!==(t=n[6])&&Ce(t,s)||We(s,n,a)},i(i){r||(F(s.block),r=!0)},o(i){for(let a=0;a<3;a+=1){const o=s.blocks[a];V(o)}r=!1},d(i){i&&L(e),s.block.d(i),s.token=null,s=null}}}function ht(n){let e,t="<ruby>練習<rt>れんしゅう</rt>したい</ruby>MIDIファイルを<ruby>開<rt>ひら</rt>いてください</ruby>";return{c(){e=k("p"),e.innerHTML=t},l(r){e=T(r,"P",{"data-svelte-h":!0}),j(e)!=="svelte-174toub"&&(e.innerHTML=t)},m(r,s){B(r,e,s)},p:z,i:z,o:z,d(r){r&&L(e)}}}function yt(n){let e,t=n[30].message+"",r;return{c(){e=k("p"),r=Ne(t),this.h()},l(s){e=T(s,"P",{style:!0});var i=I(e);r=He(i,t),i.forEach(L),this.h()},h(){b(e,"color","red")},m(s,i){B(s,e,i),p(e,r)},p(s,i){i&64&&t!==(t=s[30].message+"")&&Re(r,t)},i:z,o:z,d(s){s&&L(e)}}}function vt(n){let e,t,r,s,i,a,o,l,_,x,u,m,v,f,g,w,P,R,h,S,U,fe;t=new Je({}),t.$on("prevbar",n[18]),t.$on("nextbar",n[19]),t.$on("play",n[15]),t.$on("stop",n[17]),t.$on("pause",n[16]);function Te(y){n[22](y)}let de={};n[1]!==void 0&&(de.speed=n[1]),s=new Qe({props:de}),Q.push(()=>re(s,"speed",Te));function xe(y){n[23](y)}let be={};n[2]!==void 0&&(be.display=n[2]),o=new et({props:be}),Q.push(()=>re(o,"display",xe));function Ae(y){n[24](y)}function Le(y){n[25](y)}function Ee(y){n[26](y)}let Y={};return n[3]!==void 0&&(Y.enable=n[3]),n[4]!==void 0&&(Y.begin=n[4]),n[5]!==void 0&&(Y.end=n[5]),x=new rt({props:Y}),Q.push(()=>re(x,"enable",Ae)),Q.push(()=>re(x,"begin",Le)),Q.push(()=>re(x,"end",Ee)),w=new at({props:{value:n[7],max:n[8]}}),w.$on("input",n[9]),{c(){e=k("div"),ie(t.$$.fragment),r=O(),ie(s.$$.fragment),a=O(),ie(o.$$.fragment),_=O(),ie(x.$$.fragment),f=O(),g=k("div"),ie(w.$$.fragment),P=O(),R=k("div"),h=k("canvas"),this.h()},l(y){e=T(y,"DIV",{style:!0});var E=I(e);se(t.$$.fragment,E),r=C(E),se(s.$$.fragment,E),a=C(E),se(o.$$.fragment,E),_=C(E),se(x.$$.fragment,E),E.forEach(L),f=C(y),g=T(y,"DIV",{style:!0});var $=I(g);se(w.$$.fragment,$),$.forEach(L),P=C(y),R=T(y,"DIV",{style:!0});var W=I(R);h=T(W,"CANVAS",{id:!0,style:!0}),I(h).forEach(L),W.forEach(L),this.h()},h(){b(e,"width","100%"),b(e,"display","flex"),b(e,"flex-direction","row"),b(e,"justify-content","space-evenly"),b(e,"align-items","center"),b(g,"width","95%"),c(h,"id","canvas"),b(h,"width","96%"),b(h,"height","96%"),b(h,"left","2%"),b(h,"top","2%"),b(h,"position","relative"),b(h,"touch-action","pan-y"),b(h,"touch-action","pan-x"),b(R,"flex-grow","1"),b(R,"width","100%")},m(y,E){B(y,e,E),ae(t,e,null),p(e,r),ae(s,e,null),p(e,a),ae(o,e,null),p(e,_),ae(x,e,null),B(y,f,E),B(y,g,E),ae(w,g,null),B(y,P,E),B(y,R,E),p(R,h),n[27](h),S=!0,U||(fe=[H(h,"pointerdown",ge(n[11])),H(h,"pointermove",ge(n[12])),H(h,"pointerup",ge(n[13])),H(h,"pointercancel",ge(n[14]))],U=!0)},p(y,E){const $={};!i&&E&2&&(i=!0,$.speed=y[1],ne(()=>i=!1)),s.$set($);const W={};!l&&E&4&&(l=!0,W.display=y[2],ne(()=>l=!1)),o.$set(W);const J={};!u&&E&8&&(u=!0,J.enable=y[3],ne(()=>u=!1)),!m&&E&16&&(m=!0,J.begin=y[4],ne(()=>m=!1)),!v&&E&32&&(v=!0,J.end=y[5],ne(()=>v=!1)),x.$set(J);const Me={};E&128&&(Me.value=y[7]),E&256&&(Me.max=y[8]),w.$set(Me)},i(y){S||(F(t.$$.fragment,y),F(s.$$.fragment,y),F(o.$$.fragment,y),F(x.$$.fragment,y),F(w.$$.fragment,y),S=!0)},o(y){V(t.$$.fragment,y),V(s.$$.fragment,y),V(o.$$.fragment,y),V(x.$$.fragment,y),V(w.$$.fragment,y),S=!1},d(y){y&&(L(e),L(f),L(g),L(P),L(R)),oe(t),oe(s),oe(o),oe(x),oe(w),n[27](null),U=!1,Z(fe)}}}function kt(n){let e,t="MIDIファイルを<ruby>開<rt>ひら</rt>いています</ruby>........";return{c(){e=k("p"),e.innerHTML=t},l(r){e=T(r,"P",{"data-svelte-h":!0}),j(e)!=="svelte-b1iy1"&&(e.innerHTML=t)},m(r,s){B(r,e,s)},p:z,i:z,o:z,d(r){r&&L(e)}}}function Tt(n){let e,t,r,s,i,a,o,l,_,x;const u=[ht,wt],m=[];function v(f,g){return f[6]==null?0:1}return i=v(n),a=m[i]=u[i](n),{c(){e=O(),t=k("div"),r=k("input"),s=O(),a.c(),o=ye(),this.h()},l(f){e=C(f),t=T(f,"DIV",{style:!0});var g=I(t);r=T(g,"INPUT",{type:!0,id:!0,name:!0,accept:!0,style:!0}),g.forEach(L),s=C(f),a.l(f),o=ye(),this.h()},h(){c(r,"type","file"),c(r,"id","midi-open"),c(r,"name","midi-open"),c(r,"accept",".mid"),b(r,"font-size","24px"),b(t,"padding","4px")},m(f,g){B(f,e,g),B(f,t,g),p(t,r),B(f,s,g),m[i].m(f,g),B(f,o,g),l=!0,_||(x=H(r,"change",n[10]),_=!0)},p(f,[g]){let w=i;i=v(f),i===w?m[i].p(f,g):(ze(),V(m[w],1,1,()=>{m[w]=null}),Be(),a=m[i],a?a.p(f,g):(a=m[i]=u[i](f),a.c()),F(a,1),a.m(o.parentNode,o))},i(f){l||(F(a),l=!0)},o(f){V(a),l=!1},d(f){f&&(L(e),L(t),L(s),L(o)),m[i].d(f),_=!1,x()}}}function xt(n,e,t){let r=null,s=null,i=null,a=!1,o=!1,l=1,_=3,x=0,u=100,m=!1,v=1,f=1;function g(E){t(7,x=E.detail.value),r.seek_at_bar(x,!0)}Fe(async()=>{await Ue()});async function w(){this.files.length>0&&(t(6,s=new ke(this.files[0])),t(20,r=await s),t(8,u=r.num_bars()-1))}function P(){r&&(a=!0)}function R(E){a&&r.skip(E.movementY*r.time_per_pixel(0,i.height))}function h(){a&&(a=!1)}function S(){a&&(a=!1)}function U(){r&&r.is_playing()===!1&&r.start()}function fe(){r&&r.is_playing()&&r.stop()}function Te(){r&&(r.is_playing()&&r.stop(),r.seek_at_bar(0,!0))}function de(){r&&r.current_bar()>0&&r.seek_at_bar(r.current_bar()-1,!0)}function xe(){r&&r.seek_at_bar(r.current_bar()+1,!0)}function be(E){l=E,t(1,l)}function Ae(E){_=E,t(2,_)}function Le(E){m=E,t(3,m)}function Ee(E){v=E,t(4,v)}function Y(E){f=E,t(5,f)}function y(E){Q[E?"unshift":"push"](()=>{i=E,t(0,i),t(21,o),t(20,r),t(1,l)})}return n.$$.update=()=>{if(n.$$.dirty&3145731&&i&&o===!1){new ResizeObserver(J=>{t(0,i.width=J[0].contentRect.width,i),t(0,i.height=J[0].contentRect.height,i)}).observe(i);const $=i.getContext("2d"),W=()=>{r&&(r.tick(l),t(7,x=r.current_bar()),r.draw($,0,0,i.width,i.height)),requestAnimationFrame(W)};requestAnimationFrame(W),t(21,o=!0)}n.$$.dirty&1048632&&r&&(m?r.set_loop_region(v-1,f-1):r.set_loop_region(0,0)),n.$$.dirty&1048580&&r&&r.set_render_ahead_time(_)},[i,l,_,m,v,f,s,x,u,g,w,P,R,h,S,U,fe,Te,de,xe,r,o,be,Ae,Le,Ee,Y,y]}class Et extends ee{constructor(e){super(),te(this,e,xt,Tt,X,{})}}export{Et as component};
