import{A as Ve,B as Fe,C as ge,D as ze,s as ne,f as m,a as N,g as h,h as O,E as V,c as R,d as E,j as c,i as U,x as b,F as H,y as j,G as Q,H as Be,I as D,k as y,J as Y,K as Ne,l as Ie,m as Oe,n as Ce,o as We,p as te,e as Re,L as me,M as ie}from"../chunks/scheduler.hdNUFy2D.js";import{g as je,t as z,c as qe,a as W,S as re,i as se,f as ae,b as oe,d as le,m as ue,e as ce}from"../chunks/index.2nKtRfP8.js";function He(n,e){const t=e.token={};function r(s,i,a,o){if(e.token!==t)return;e.resolved=o;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const _=s&&(e.current=s)(l);let p=!1;e.block&&(e.blocks?e.blocks.forEach((u,T)=>{T!==i&&u&&(je(),z(u,1,1,()=>{e.blocks[T]===u&&(e.blocks[T]=null)}),qe())}):e.block.d(1),_.c(),W(_,1),_.m(e.mount(),e.anchor),p=!0),e.block=_,e.blocks&&(e.blocks[i]=_),p&&ze()}if(Ve(n)){const s=Fe();if(n.then(i=>{ge(s),r(e.then,1,e.value,i),ge(null)},i=>{if(ge(s),r(e.catch,2,e.error,i),ge(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function Ge(n,e,t){const r=e.slice(),{resolved:s}=n;n.current===n.then&&(r[n.value]=s),n.current===n.catch&&(r[n.error]=s),n.block.p(r,t)}function Je(n){let e,t,r='<span class="material-symbols-outlined svelte-asyg6o">navigate_before</span>',s,i,a='<span class="material-symbols-outlined svelte-asyg6o">play_arrow</span>',o,l,_='<span class="material-symbols-outlined svelte-asyg6o">stop</span>',p,u,T='<span class="material-symbols-outlined svelte-asyg6o">pause</span>',v,k,L='<span class="material-symbols-outlined svelte-asyg6o">navigate_next</span>',g,I;return{c(){e=m("div"),t=m("button"),t.innerHTML=r,s=N(),i=m("button"),i.innerHTML=a,o=N(),l=m("button"),l.innerHTML=_,p=N(),u=m("button"),u.innerHTML=T,v=N(),k=m("button"),k.innerHTML=L,this.h()},l(M){e=h(M,"DIV",{id:!0,class:!0});var d=O(e);t=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),V(t)!=="svelte-l4t4zq"&&(t.innerHTML=r),s=R(d),i=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),V(i)!=="svelte-w43bq6"&&(i.innerHTML=a),o=R(d),l=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),V(l)!=="svelte-13vtwoq"&&(l.innerHTML=_),p=R(d),u=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),V(u)!=="svelte-e21jg0"&&(u.innerHTML=T),v=R(d),k=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),V(k)!=="svelte-uevd98"&&(k.innerHTML=L),d.forEach(E),this.h()},h(){c(t,"id","bar_prev_button"),c(t,"class","svelte-asyg6o"),c(i,"id","play_button"),c(i,"class","svelte-asyg6o"),c(l,"id","stop_button"),c(l,"class","svelte-asyg6o"),c(u,"id","pause_button"),c(u,"class","svelte-asyg6o"),c(k,"id","bar_next_button"),c(k,"class","svelte-asyg6o"),c(e,"id","transport"),c(e,"class","svelte-asyg6o")},m(M,d){U(M,e,d),b(e,t),b(e,s),b(e,i),b(e,o),b(e,l),b(e,p),b(e,u),b(e,v),b(e,k),g||(I=[H(t,"click",n[0]),H(i,"click",n[2]),H(l,"click",n[3]),H(u,"click",n[4]),H(k,"click",n[1])],g=!0)},p:j,i:j,o:j,d(M){M&&E(e),g=!1,Q(I)}}}function Ke(n){const e=Be();function t(){e("prevbar")}function r(){e("nextbar")}function s(){e("play")}function i(){e("stop")}function a(){e("pause")}return[t,r,s,i,a]}class Ye extends re{constructor(e){super(),se(this,e,Ke,Je,ne,{})}}function Qe(n){let e,t,r="<ruby>速<rt>はや</rt></ruby>さ:",s,i,a,o,l,_,p,u,T,v;return{c(){e=m("span"),t=m("label"),t.innerHTML=r,s=N(),i=m("div"),a=m("datalist"),o=m("option"),l=m("option"),_=m("option"),p=N(),u=m("input"),this.h()},l(k){e=h(k,"SPAN",{});var L=O(e);t=h(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(t)!=="svelte-v3vmor"&&(t.innerHTML=r),s=R(L),i=h(L,"DIV",{style:!0,class:!0});var g=O(i);a=h(g,"DATALIST",{id:!0,class:!0});var I=O(a);o=h(I,"OPTION",{label:!0,class:!0}),O(o).forEach(E),l=h(I,"OPTION",{label:!0,class:!0}),O(l).forEach(E),_=h(I,"OPTION",{label:!0,class:!0}),O(_).forEach(E),I.forEach(E),p=R(g),u=h(g,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),g.forEach(E),L.forEach(E),this.h()},h(){c(t,"for","slider"),c(t,"class","responsive-font-medium svelte-1xnj73q"),o.__value="0.5",D(o,o.__value),c(o,"label","おそい"),c(o,"class","svelte-1xnj73q"),l.__value="1.0",D(l,l.__value),c(l,"label","ふつう"),c(l,"class","svelte-1xnj73q"),_.__value="1.5",D(_,_.__value),c(_,"label","はやい"),c(_,"class","svelte-1xnj73q"),c(a,"id","speed_values"),c(a,"class","svelte-1xnj73q"),y(u,"width","180px"),c(u,"type","range"),c(u,"id","slider"),c(u,"list","speed_values"),c(u,"min","0.5"),c(u,"max","1.5"),c(u,"step","0.1"),y(i,"display","inline-block"),c(i,"class","responsive-font-small svelte-1xnj73q")},m(k,L){U(k,e,L),b(e,t),b(e,s),b(e,i),b(i,a),b(a,o),b(a,l),b(a,_),b(i,p),b(i,u),D(u,n[0]),T||(v=[H(u,"change",n[1]),H(u,"input",n[1])],T=!0)},p(k,[L]){L&1&&D(u,k[0])},i:j,o:j,d(k){k&&E(e),T=!1,Q(v)}}}function Xe(n,e,t){let{speed:r=1}=e;function s(){r=Y(this.value),t(0,r)}return n.$$set=i=>{"speed"in i&&t(0,r=i.speed)},[r,s]}class Ze extends re{constructor(e){super(),se(this,e,Xe,Qe,ne,{speed:0})}}function $e(n){let e,t,r="<ruby>表示量<rt>ひょうじりょう</rt></ruby>:",s,i,a,o,l,_,p,u,T,v;return{c(){e=m("span"),t=m("label"),t.innerHTML=r,s=N(),i=m("div"),a=m("datalist"),o=m("option"),l=m("option"),_=m("option"),p=N(),u=m("input"),this.h()},l(k){e=h(k,"SPAN",{});var L=O(e);t=h(L,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(t)!=="svelte-mxjbzg"&&(t.innerHTML=r),s=R(L),i=h(L,"DIV",{style:!0,class:!0});var g=O(i);a=h(g,"DATALIST",{id:!0,class:!0});var I=O(a);o=h(I,"OPTION",{label:!0,class:!0}),O(o).forEach(E),l=h(I,"OPTION",{label:!0,class:!0}),O(l).forEach(E),_=h(I,"OPTION",{label:!0,class:!0}),O(_).forEach(E),I.forEach(E),p=R(g),u=h(g,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),g.forEach(E),L.forEach(E),this.h()},h(){c(t,"for","display_slider"),c(t,"class","responsive-font-medium svelte-b33osa"),o.__value="1.0",D(o,o.__value),c(o,"label","すくない"),c(o,"class","svelte-b33osa"),l.__value="3.0",D(l,l.__value),c(l,"label","ふつう"),c(l,"class","svelte-b33osa"),_.__value="5.0",D(_,_.__value),c(_,"label","おおい"),c(_,"class","svelte-b33osa"),c(a,"id","display_values"),c(a,"class","svelte-b33osa"),y(u,"width","180px"),c(u,"type","range"),c(u,"id","display_slider"),c(u,"list","display_values"),c(u,"min","1.0"),c(u,"max","5.0"),c(u,"step","0.1"),y(i,"display","inline-block"),c(i,"class","responsive-font-small svelte-b33osa")},m(k,L){U(k,e,L),b(e,t),b(e,s),b(e,i),b(i,a),b(a,o),b(a,l),b(a,_),b(i,p),b(i,u),D(u,n[0]),T||(v=[H(u,"change",n[1]),H(u,"input",n[1])],T=!0)},p(k,[L]){L&1&&D(u,k[0])},i:j,o:j,d(k){k&&E(e),T=!1,Q(v)}}}function et(n,e,t){let{display:r=3}=e;function s(){r=Y(this.value),t(0,r)}return n.$$set=i=>{"display"in i&&t(0,r=i.display)},[r,s]}class tt extends re{constructor(e){super(),se(this,e,et,$e,ne,{display:0})}}function nt(n){let e,t,r="<ruby>繰<rt>く</rt></ruby>り<ruby>返<rt>かえ</rt></ruby>し:",s,i,a,o,l,_="<ruby>範囲<rt>はんい</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",p,u,T,v,k="ー",L,g,I,M;return{c(){e=m("span"),t=m("label"),t.innerHTML=r,s=N(),i=m("input"),a=N(),o=m("span"),l=m("label"),l.innerHTML=_,p=N(),u=m("input"),T=N(),v=m("labe"),v.textContent=k,L=N(),g=m("input"),this.h()},l(d){e=h(d,"SPAN",{style:!0});var P=O(e);t=h(P,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(t)!=="svelte-1vayo76"&&(t.innerHTML=r),s=R(P),i=h(P,"INPUT",{id:!0,type:!0,style:!0}),a=R(P),o=h(P,"SPAN",{class:!0});var q=O(o);l=h(q,"LABEL",{for:!0,style:!0,class:!0,"data-svelte-h":!0}),V(l)!=="svelte-73dl4y"&&(l.innerHTML=_),p=R(q),u=h(q,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),T=R(q),v=h(q,"LABE",{style:!0,class:!0,"data-svelte-h":!0}),V(v)!=="svelte-19n9yl"&&(v.textContent=k),L=R(q),g=h(q,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),q.forEach(E),P.forEach(E),this.h()},h(){c(t,"for","region_loop_check"),c(t,"class","responsive-font-medium svelte-1nuzm0v"),c(i,"id","region_loop_check"),c(i,"type","checkbox"),y(i,"margin","0px"),y(i,"width","32px"),y(i,"height","32px"),c(l,"for","min_loop"),y(l,"margin-left","8px"),y(l,"margin-right","0px"),c(l,"class","responsive-font-medium svelte-1nuzm0v"),c(u,"type","number"),c(u,"id","min_loop"),c(u,"min","1"),c(u,"step","1"),u.required=!0,y(u,"margin","0px"),y(u,"width","3em"),y(u,"text-align","center"),y(u,"font-size","large"),y(v,"margin","4px"),c(v,"class","responsive-font-medium svelte-1nuzm0v"),c(g,"type","number"),c(g,"id","max_loop"),c(g,"min","1"),c(g,"step","1"),g.required=!0,y(g,"margin","0px"),y(g,"width","3em"),y(g,"text-align","center"),y(g,"font-size","large"),c(o,"class","svelte-1nuzm0v"),Ne(o,"hidden",n[0]===!1),y(e,"display","flex"),y(e,"align-items","center")},m(d,P){U(d,e,P),b(e,t),b(e,s),b(e,i),i.checked=n[0],b(e,a),b(e,o),b(o,l),b(o,p),b(o,u),D(u,n[1]),b(o,T),b(o,v),b(o,L),b(o,g),D(g,n[2]),I||(M=[H(i,"change",n[3]),H(u,"input",n[4]),H(g,"input",n[5])],I=!0)},p(d,[P]){P&1&&(i.checked=d[0]),P&2&&Y(u.value)!==d[1]&&D(u,d[1]),P&4&&Y(g.value)!==d[2]&&D(g,d[2]),P&1&&Ne(o,"hidden",d[0]===!1)},i:j,o:j,d(d){d&&E(e),I=!1,Q(M)}}}function rt(n,e,t){let{enable:r=!1}=e,{begin:s=1}=e,{end:i=1}=e;function a(){r=this.checked,t(0,r)}function o(){s=Y(this.value),t(1,s)}function l(){i=Y(this.value),t(2,i)}return n.$$set=_=>{"enable"in _&&t(0,r=_.enable),"begin"in _&&t(1,s=_.begin),"end"in _&&t(2,i=_.end)},[r,s,i,a,o,l]}class st extends re{constructor(e){super(),se(this,e,rt,nt,ne,{enable:0,begin:1,end:2})}}function it(n){let e,t,r="<ruby>再生位置<rt>さいせいいち</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",s,i,a=n[0]+1+"",o,l,_,p,u;return{c(){e=m("span"),t=m("label"),t.innerHTML=r,s=N(),i=m("label"),o=Ie(a),l=N(),_=m("input"),this.h()},l(T){e=h(T,"SPAN",{style:!0});var v=O(e);t=h(v,"LABEL",{for:!0,style:!0,class:!0,"data-svelte-h":!0}),V(t)!=="svelte-147pt4x"&&(t.innerHTML=r),s=R(v),i=h(v,"LABEL",{for:!0,id:!0,style:!0,class:!0});var k=O(i);o=Oe(k,a),k.forEach(E),l=R(v),_=h(v,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0,style:!0}),v.forEach(E),this.h()},h(){c(t,"for","bar_slider"),y(t,"margin-left","4px"),c(t,"class","responsive-font-medium svelte-1y84s32"),c(i,"for","bar_slider"),c(i,"id","bar_label"),y(i,"width","3em"),y(i,"text-align","center"),c(i,"class","responsive-font-medium svelte-1y84s32"),c(_,"type","range"),c(_,"id","bar_slider"),c(_,"min","0"),c(_,"max",n[1]),c(_,"step","1"),y(_,"flex-grow","1"),y(_,"padding","0px"),y(e,"display","flex"),y(e,"align-items","center")},m(T,v){U(T,e,v),b(e,t),b(e,s),b(e,i),b(i,o),b(e,l),b(e,_),D(_,n[0]),p||(u=[H(_,"input",n[2]),H(_,"change",n[3]),H(_,"input",n[3])],p=!0)},p(T,[v]){v&1&&a!==(a=T[0]+1+"")&&Ce(o,a),v&2&&c(_,"max",T[1]),v&1&&D(_,T[0])},i:j,o:j,d(T){T&&E(e),p=!1,Q(u)}}}function at(n,e,t){const r=Be();function s(l){r("input",{value:l.target.valueAsNumber})}let{value:i=0}=e,{max:a=100}=e;function o(){i=Y(this.value),t(0,i)}return n.$$set=l=>{"value"in l&&t(0,i=l.value),"max"in l&&t(1,a=l.max)},[i,a,s,o]}class ot extends re{constructor(e){super(),se(this,e,at,it,ne,{value:0,max:1})}}const lt=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:void 0;let x;const F=new Array(128).fill(void 0);F.push(void 0,null,!0,!1);function f(n){return F[n]}let de=F.length;function ut(n){n<132||(F[n]=de,de=n)}function be(n){const e=f(n);return ut(n),e}const De=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&De.decode();let _e=null;function he(){return(_e===null||_e.byteLength===0)&&(_e=new Uint8Array(x.memory.buffer)),_e}function G(n,e){return n=n>>>0,De.decode(he().subarray(n,n+e))}function A(n){de===F.length&&F.push(F.length+1);const e=de;return de=F[e],F[e]=n,e}function xe(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const s=n.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=n.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(n)){const s=n.length;let i="[";s>0&&(i+=xe(n[0]));for(let a=1;a<s;a++)i+=", "+xe(n[a]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}let Pe=0;const we=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ct=typeof we.encodeInto=="function"?function(n,e){return we.encodeInto(n,e)}:function(n,e){const t=we.encode(n);return e.set(t),{read:n.length,written:t.length}};function _t(n,e,t){if(t===void 0){const o=we.encode(n),l=e(o.length,1)>>>0;return he().subarray(l,l+o.length).set(o),Pe=o.length,l}let r=n.length,s=e(r,1)>>>0;const i=he();let a=0;for(;a<r;a++){const o=n.charCodeAt(a);if(o>127)break;i[s+a]=o}if(a!==r){a!==0&&(n=n.slice(a)),s=t(s,r,r=a+n.length*3,1)>>>0;const o=he().subarray(s+a,s+r),l=ct(n,o);a+=l.written}return Pe=a,s}let fe=null;function ve(){return(fe===null||fe.byteLength===0)&&(fe=new Int32Array(x.memory.buffer)),fe}function ft(n,e,t,r){const s={a:n,b:e,cnt:1,dtor:t},i=(...a)=>{s.cnt++;const o=s.a;s.a=0;try{return r(o,s.b,...a)}finally{--s.cnt===0?x.__wbindgen_export_2.get(s.dtor)(o,s.b):s.a=o}};return i.original=s,i}function dt(n,e,t){x._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h978831c3e4267bae(n,e,A(t))}let ye=128;function bt(n){if(ye==1)throw new Error("out of js stack");return F[--ye]=n,ye}function B(n,e){try{return n.apply(this,e)}catch(t){x.__wbindgen_exn_store(A(t))}}function pt(n,e,t,r){x.wasm_bindgen__convert__closures__invoke2_mut__h04dd8e5622e8fd43(n,e,A(t),A(r))}class ke{static __wrap(e){e=e>>>0;const t=Object.create(ke.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();x.__wbg_randomaccessmidiplayer_free(e)}constructor(e){const t=x.randomaccessmidiplayer_new(A(e));return be(t)}num_bars(){return x.randomaccessmidiplayer_num_bars(this.__wbg_ptr)>>>0}render_ahead_time(){return x.randomaccessmidiplayer_render_ahead_time(this.__wbg_ptr)}set_render_ahead_time(e){x.randomaccessmidiplayer_set_render_ahead_time(this.__wbg_ptr,e)}time_per_pixel(e,t){return x.randomaccessmidiplayer_time_per_pixel(this.__wbg_ptr,e,t)}current_bar(){return x.randomaccessmidiplayer_current_bar(this.__wbg_ptr)>>>0}start(){x.randomaccessmidiplayer_start(this.__wbg_ptr)}set_loop_region(e,t){x.randomaccessmidiplayer_set_loop_region(this.__wbg_ptr,e,t)}seek_at_bar(e,t){x.randomaccessmidiplayer_seek_at_bar(this.__wbg_ptr,e,t)}seek_at_time(e,t){x.randomaccessmidiplayer_seek_at_time(this.__wbg_ptr,e,t)}skip(e,t){x.randomaccessmidiplayer_skip(this.__wbg_ptr,e,t)}stop(){x.randomaccessmidiplayer_stop(this.__wbg_ptr)}tick(e){x.randomaccessmidiplayer_tick(this.__wbg_ptr,e)}is_playing(){return x.randomaccessmidiplayer_is_playing(this.__wbg_ptr)!==0}draw(e,t,r,s,i){try{const l=x.__wbindgen_add_to_stack_pointer(-16);x.randomaccessmidiplayer_draw(l,this.__wbg_ptr,bt(e),t,r,s,i);var a=ve()[l/4+0],o=ve()[l/4+1];if(o)throw be(a)}finally{x.__wbindgen_add_to_stack_pointer(16),F[ye++]=void 0}}}async function gt(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function mt(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){be(e)},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(G(e,t));return A(r)},n.wbg.__wbindgen_string_new=function(e,t){const r=G(e,t);return A(r)},n.wbg.__wbg_randomaccessmidiplayer_new=function(e){const t=ke.__wrap(e);return A(t)},n.wbg.__wbg_setstrokeStyle_1b4551387606453b=function(e,t){f(e).strokeStyle=f(t)},n.wbg.__wbg_setfillStyle_1ebd7d8f502888fa=function(e,t){f(e).fillStyle=f(t)},n.wbg.__wbg_setfont_a622e8f71fcc67bd=function(e,t,r){f(e).font=G(t,r)},n.wbg.__wbg_settextAlign_425d121bce67eea6=function(e,t,r){f(e).textAlign=G(t,r)},n.wbg.__wbg_settextBaseline_ff6ae71131150241=function(e,t,r){f(e).textBaseline=G(t,r)},n.wbg.__wbg_beginPath_5c4c10cc904edc64=function(e){f(e).beginPath()},n.wbg.__wbg_fill_854920f07573dffd=function(e){f(e).fill()},n.wbg.__wbg_stroke_d6cd6e7c98952ff8=function(e){f(e).stroke()},n.wbg.__wbg_lineTo_ef21aebc726bbda0=function(e,t,r){f(e).lineTo(t,r)},n.wbg.__wbg_moveTo_23c53eed282c0730=function(e,t,r){f(e).moveTo(t,r)},n.wbg.__wbg_roundRect_5bc558db0fe10790=function(){return B(function(e,t,r,s,i,a){f(e).roundRect(t,r,s,i,a)},arguments)},n.wbg.__wbg_clearRect_d976768ba14de6f9=function(e,t,r,s,i){f(e).clearRect(t,r,s,i)},n.wbg.__wbg_fillRect_ae135cf52671cb3d=function(e,t,r,s,i){f(e).fillRect(t,r,s,i)},n.wbg.__wbg_strokeRect_eb3d071a52abca07=function(e,t,r,s,i){f(e).strokeRect(t,r,s,i)},n.wbg.__wbg_strokeText_a4c0b8e18d53ea7f=function(){return B(function(e,t,r,s,i){f(e).strokeText(G(t,r),s,i)},arguments)},n.wbg.__wbg_connect_7374783233c39eda=function(){return B(function(e,t){const r=f(e).connect(f(t));return A(r)},arguments)},n.wbg.__wbg_disconnect_13e3b9054333eb88=function(){return B(function(e){f(e).disconnect()},arguments)},n.wbg.__wbg_gain_ea4961e006680142=function(e){const t=f(e).gain;return A(t)},n.wbg.__wbg_arrayBuffer_a9d862b05aaee2f9=function(e){const t=f(e).arrayBuffer();return A(t)},n.wbg.__wbg_threshold_3334a9415a751f8f=function(e){const t=f(e).threshold;return A(t)},n.wbg.__wbg_knee_26a66de96fcff3d9=function(e){const t=f(e).knee;return A(t)},n.wbg.__wbg_ratio_bf0caf07ef32a1b1=function(e){const t=f(e).ratio;return A(t)},n.wbg.__wbg_destination_4d44007f7d08d71b=function(e){const t=f(e).destination;return A(t)},n.wbg.__wbg_currentTime_d2be936586614ff4=function(e){return f(e).currentTime},n.wbg.__wbg_new_db252a952beaf4fa=function(){return B(function(){const e=new lt;return A(e)},arguments)},n.wbg.__wbg_close_b87bff143de234d5=function(){return B(function(e){const t=f(e).close();return A(t)},arguments)},n.wbg.__wbg_createDynamicsCompressor_831f19de62047bce=function(){return B(function(e){const t=f(e).createDynamicsCompressor();return A(t)},arguments)},n.wbg.__wbg_createGain_c702b552853e1a86=function(){return B(function(e){const t=f(e).createGain();return A(t)},arguments)},n.wbg.__wbg_createOscillator_33e2fb4cedf63575=function(){return B(function(e){const t=f(e).createOscillator();return A(t)},arguments)},n.wbg.__wbg_value_d7acd600733d8062=function(e){return f(e).value},n.wbg.__wbg_setvalue_6d68fd7da7d604f9=function(e,t){f(e).value=t},n.wbg.__wbg_exponentialRampToValueAtTime_5cdafb7091d2faf6=function(){return B(function(e,t,r){const s=f(e).exponentialRampToValueAtTime(t,r);return A(s)},arguments)},n.wbg.__wbg_linearRampToValueAtTime_d7663013272d6c74=function(){return B(function(e,t,r){const s=f(e).linearRampToValueAtTime(t,r);return A(s)},arguments)},n.wbg.__wbg_setTargetAtTime_70ccc68d17235e73=function(){return B(function(e,t,r,s){const i=f(e).setTargetAtTime(t,r,s);return A(i)},arguments)},n.wbg.__wbg_setValueAtTime_6460f895778e5046=function(){return B(function(e,t,r){const s=f(e).setValueAtTime(t,r);return A(s)},arguments)},n.wbg.__wbg_settype_523bfbd496f822de=function(e,t){f(e).type=be(t)},n.wbg.__wbg_frequency_2dccb3ae0f823e46=function(e){const t=f(e).frequency;return A(t)},n.wbg.__wbg_start_58f106eeea44565c=function(){return B(function(e,t){f(e).start(t)},arguments)},n.wbg.__wbindgen_cb_drop=function(e){const t=be(e).original;return t.cnt--==1?(t.a=0,!0):!1},n.wbg.__wbg_queueMicrotask_4d890031a6a5a50c=function(e){queueMicrotask(f(e))},n.wbg.__wbg_queueMicrotask_adae4bc085237231=function(e){const t=f(e).queueMicrotask;return A(t)},n.wbg.__wbindgen_is_function=function(e){return typeof f(e)=="function"},n.wbg.__wbg_newnoargs_c62ea9419c21fbac=function(e,t){const r=new Function(G(e,t));return A(r)},n.wbg.__wbg_call_90c26b09837aba1c=function(){return B(function(e,t){const r=f(e).call(f(t));return A(r)},arguments)},n.wbg.__wbg_self_f0e34d89f33b99fd=function(){return B(function(){const e=self.self;return A(e)},arguments)},n.wbg.__wbg_window_d3b084224f4774d7=function(){return B(function(){const e=window.window;return A(e)},arguments)},n.wbg.__wbg_globalThis_9caa27ff917c6860=function(){return B(function(){const e=globalThis.globalThis;return A(e)},arguments)},n.wbg.__wbg_global_35dfdd59a4da3e74=function(){return B(function(){const e=global.global;return A(e)},arguments)},n.wbg.__wbindgen_is_undefined=function(e){return f(e)===void 0},n.wbg.__wbg_call_5da1969d7cd31ccd=function(){return B(function(e,t,r){const s=f(e).call(f(t),f(r));return A(s)},arguments)},n.wbg.__wbg_new_60f57089c7563e81=function(e,t){try{var r={a:e,b:t},s=(a,o)=>{const l=r.a;r.a=0;try{return pt(l,r.b,a,o)}finally{r.a=l}};const i=new Promise(s);return A(i)}finally{r.a=r.b=0}},n.wbg.__wbg_resolve_6e1c6553a82f85b7=function(e){const t=Promise.resolve(f(e));return A(t)},n.wbg.__wbg_then_3ab08cd4fbb91ae9=function(e,t){const r=f(e).then(f(t));return A(r)},n.wbg.__wbg_then_8371cc12cfedc5a2=function(e,t,r){const s=f(e).then(f(t),f(r));return A(s)},n.wbg.__wbg_buffer_a448f833075b71ba=function(e){const t=f(e).buffer;return A(t)},n.wbg.__wbg_new_8f67e318f15d7254=function(e){const t=new Uint8Array(f(e));return A(t)},n.wbg.__wbg_set_2357bf09366ee480=function(e,t,r){f(e).set(f(t),r>>>0)},n.wbg.__wbg_length_1d25fa9e4ac21ce7=function(e){return f(e).length},n.wbg.__wbindgen_object_clone_ref=function(e){const t=f(e);return A(t)},n.wbg.__wbindgen_debug_string=function(e,t){const r=xe(f(t)),s=_t(r,x.__wbindgen_malloc,x.__wbindgen_realloc),i=Pe;ve()[e/4+1]=i,ve()[e/4+0]=s},n.wbg.__wbindgen_throw=function(e,t){throw new Error(G(e,t))},n.wbg.__wbindgen_memory=function(){const e=x.memory;return A(e)},n.wbg.__wbindgen_closure_wrapper584=function(e,t,r){const s=ft(e,t,78,dt);return A(s)},n}function ht(n,e){return x=n.exports,Ue.__wbindgen_wasm_module=e,fe=null,_e=null,x}async function Ue(n){if(x!==void 0)return x;typeof n>"u"&&(n=new URL(""+new URL("../assets/t0k0_audio_bg.Kais1vFc.wasm",import.meta.url).href,import.meta.url));const e=mt();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await gt(await n,e);return ht(t,r)}function wt(n){let e,t,r,s={ctx:n,current:null,token:null,hasCatch:!0,pending:Tt,then:kt,catch:vt,value:31,error:32,blocks:[,,,]};return He(t=n[6],s),{c(){e=Re(),s.block.c()},l(i){e=Re(),s.block.l(i)},m(i,a){U(i,e,a),s.block.m(i,s.anchor=a),s.mount=()=>e.parentNode,s.anchor=e,r=!0},p(i,a){n=i,s.ctx=n,a[0]&64&&t!==(t=n[6])&&He(t,s)||Ge(s,n,a)},i(i){r||(W(s.block),r=!0)},o(i){for(let a=0;a<3;a+=1){const o=s.blocks[a];z(o)}r=!1},d(i){i&&E(e),s.block.d(i),s.token=null,s=null}}}function yt(n){let e,t="<ruby>練習<rt>れんしゅう</rt>したい</ruby>MIDIファイルを<ruby>開<rt>ひら</rt>いてください</ruby>";return{c(){e=m("p"),e.innerHTML=t},l(r){e=h(r,"P",{"data-svelte-h":!0}),V(e)!=="svelte-174toub"&&(e.innerHTML=t)},m(r,s){U(r,e,s)},p:j,i:j,o:j,d(r){r&&E(e)}}}function vt(n){let e,t=n[32].message+"",r;return{c(){e=m("p"),r=Ie(t),this.h()},l(s){e=h(s,"P",{style:!0});var i=O(e);r=Oe(i,t),i.forEach(E),this.h()},h(){y(e,"color","red")},m(s,i){U(s,e,i),b(e,r)},p(s,i){i[0]&64&&t!==(t=s[32].message+"")&&Ce(r,t)},i:j,o:j,d(s){s&&E(e)}}}function kt(n){let e,t,r,s,i,a,o,l,_,p,u,T,v,k,L,g,I,M,d,P,q,J;t=new Ye({}),t.$on("prevbar",n[19]),t.$on("nextbar",n[20]),t.$on("play",n[16]),t.$on("stop",n[18]),t.$on("pause",n[17]);function Te(w){n[24](w)}let pe={};n[1]!==void 0&&(pe.speed=n[1]),s=new Ze({props:pe}),te.push(()=>ae(s,"speed",Te));function Ae(w){n[25](w)}let X={};n[2]!==void 0&&(X.display=n[2]),o=new tt({props:X}),te.push(()=>ae(o,"display",Ae));function Ee(w){n[26](w)}function Le(w){n[27](w)}function Me(w){n[28](w)}let Z={};return n[3]!==void 0&&(Z.enable=n[3]),n[4]!==void 0&&(Z.begin=n[4]),n[5]!==void 0&&(Z.end=n[5]),p=new st({props:Z}),te.push(()=>ae(p,"enable",Ee)),te.push(()=>ae(p,"begin",Le)),te.push(()=>ae(p,"end",Me)),g=new ot({props:{value:n[7],max:n[8]}}),g.$on("input",n[10]),{c(){e=m("div"),oe(t.$$.fragment),r=N(),oe(s.$$.fragment),a=N(),oe(o.$$.fragment),_=N(),oe(p.$$.fragment),k=N(),L=m("div"),oe(g.$$.fragment),I=N(),M=m("div"),d=m("canvas"),this.h()},l(w){e=h(w,"DIV",{style:!0});var C=O(e);le(t.$$.fragment,C),r=R(C),le(s.$$.fragment,C),a=R(C),le(o.$$.fragment,C),_=R(C),le(p.$$.fragment,C),C.forEach(E),k=R(w),L=h(w,"DIV",{style:!0});var K=O(L);le(g.$$.fragment,K),K.forEach(E),I=R(w),M=h(w,"DIV",{style:!0});var S=O(M);d=h(S,"CANVAS",{id:!0,style:!0}),O(d).forEach(E),S.forEach(E),this.h()},h(){y(e,"width","100%"),y(e,"display","flex"),y(e,"flex-direction","row"),y(e,"justify-content","space-evenly"),y(e,"align-items","center"),y(L,"width","95%"),c(d,"id","canvas"),y(d,"width","96%"),y(d,"height","96%"),y(d,"left","2%"),y(d,"top","2%"),y(d,"position","relative"),y(d,"touch-action","pan-y"),y(d,"touch-action","pan-x"),y(M,"flex-grow","1"),y(M,"width","100%")},m(w,C){U(w,e,C),ue(t,e,null),b(e,r),ue(s,e,null),b(e,a),ue(o,e,null),b(e,_),ue(p,e,null),U(w,k,C),U(w,L,C),ue(g,L,null),U(w,I,C),U(w,M,C),b(M,d),n[29](d),P=!0,q||(J=[H(d,"pointerdown",me(n[12])),H(d,"pointermove",me(n[13])),H(d,"pointerup",me(n[14])),H(d,"pointercancel",me(n[15]))],q=!0)},p(w,C){const K={};!i&&C[0]&2&&(i=!0,K.speed=w[1],ie(()=>i=!1)),s.$set(K);const S={};!l&&C[0]&4&&(l=!0,S.display=w[2],ie(()=>l=!1)),o.$set(S);const $={};!u&&C[0]&8&&(u=!0,$.enable=w[3],ie(()=>u=!1)),!T&&C[0]&16&&(T=!0,$.begin=w[4],ie(()=>T=!1)),!v&&C[0]&32&&(v=!0,$.end=w[5],ie(()=>v=!1)),p.$set($);const ee={};C[0]&128&&(ee.value=w[7]),C[0]&256&&(ee.max=w[8]),g.$set(ee)},i(w){P||(W(t.$$.fragment,w),W(s.$$.fragment,w),W(o.$$.fragment,w),W(p.$$.fragment,w),W(g.$$.fragment,w),P=!0)},o(w){z(t.$$.fragment,w),z(s.$$.fragment,w),z(o.$$.fragment,w),z(p.$$.fragment,w),z(g.$$.fragment,w),P=!1},d(w){w&&(E(e),E(k),E(L),E(I),E(M)),ce(t),ce(s),ce(o),ce(p),ce(g),n[29](null),q=!1,Q(J)}}}function Tt(n){let e,t="MIDIファイルを<ruby>開<rt>ひら</rt>いています</ruby>........";return{c(){e=m("p"),e.innerHTML=t},l(r){e=h(r,"P",{"data-svelte-h":!0}),V(e)!=="svelte-b1iy1"&&(e.innerHTML=t)},m(r,s){U(r,e,s)},p:j,i:j,o:j,d(r){r&&E(e)}}}function At(n){let e,t,r,s,i,a,o,l,_,p,u,T,v,k;const L=[yt,wt],g=[];function I(M,d){return M[6]==null?0:1}return p=I(n),u=g[p]=L[p](n),{c(){e=m("div"),t=N(),r=m("div"),s=m("input"),i=N(),a=m("button"),o=m("span"),l=Ie(n[9]),_=N(),u.c(),this.h()},l(M){e=h(M,"DIV",{id:!0,class:!0});var d=O(e);t=R(d),r=h(d,"DIV",{style:!0});var P=O(r);s=h(P,"INPUT",{type:!0,id:!0,name:!0,accept:!0,style:!0}),P.forEach(E),i=R(d),a=h(d,"BUTTON",{id:!0,class:!0});var q=O(a);o=h(q,"SPAN",{class:!0});var J=O(o);l=Oe(J,n[9]),J.forEach(E),q.forEach(E),_=R(d),u.l(d),d.forEach(E),this.h()},h(){c(s,"type","file"),c(s,"id","midi-open"),c(s,"name","midi-open"),c(s,"accept",".mid"),y(s,"font-size","medium"),y(r,"padding","4px"),c(o,"class","material-symbols-outlined svelte-nanmym"),c(a,"id","fullscreen-button"),c(a,"class","svelte-nanmym"),c(e,"id","frame"),c(e,"class","svelte-nanmym")},m(M,d){U(M,e,d),b(e,t),b(e,r),b(r,s),b(e,i),b(e,a),b(a,o),b(o,l),b(e,_),g[p].m(e,null),T=!0,v||(k=[H(s,"change",n[11]),H(a,"click",n[21])],v=!0)},p(M,d){(!T||d[0]&512)&&Ce(l,M[9]);let P=p;p=I(M),p===P?g[p].p(M,d):(je(),z(g[P],1,1,()=>{g[P]=null}),qe(),u=g[p],u?u.p(M,d):(u=g[p]=L[p](M),u.c()),W(u,1),u.m(e,null))},i(M){T||(W(u),T=!0)},o(M){z(u),T=!1},d(M){M&&E(e),g[p].d(),v=!1,Q(k)}}}function Et(n,e,t){let r=null,s=null,i=null,a=!1,o=!1,l=1,_=3,p=0,u=100,T=!1,v=1,k=1;function L(S){t(7,p=S.detail.value),r.seek_at_bar(p,!0)}We(async()=>{await Ue()});async function g(){this.files.length>0&&(r&&(r.stop(),r.free(),t(22,r=null)),t(6,s=new ke(this.files[0])),t(22,r=await s),t(8,u=r.num_bars()-1))}function I(){r&&(a=!0)}function M(S){a&&r.skip(S.movementY*r.time_per_pixel(0,i.height))}function d(){a&&(a=!1)}function P(){a&&(a=!1)}function q(){r&&r.is_playing()===!1&&r.start()}function J(){r&&r.is_playing()&&r.stop()}function Te(){r&&(r.is_playing()&&r.stop(),r.seek_at_bar(0,!0))}function pe(){r&&r.current_bar()>0&&r.seek_at_bar(r.current_bar()-1,!0)}function Ae(){r&&r.seek_at_bar(r.current_bar()+1,!0)}let X="fullscreen";function Ee(){document.fullscreenElement?(document.exitFullscreen(),t(9,X="fullscreen")):(document.body.requestFullscreen(),t(9,X="fullscreen_Exit"))}function Le(S){l=S,t(1,l)}function Me(S){_=S,t(2,_)}function Z(S){T=S,t(3,T)}function w(S){v=S,t(4,v)}function C(S){k=S,t(5,k)}function K(S){te[S?"unshift":"push"](()=>{i=S,t(0,i),t(23,o),t(22,r),t(1,l)})}return n.$$.update=()=>{if(n.$$.dirty[0]&12582915)if(i){if(o===!1){new ResizeObserver(Se=>{t(0,i.width=Se[0].contentRect.width,i),t(0,i.height=Se[0].contentRect.height,i)}).observe(i);const $=i.getContext("2d"),ee=()=>{r&&i&&(r.tick(l),t(7,p=r.current_bar()),r.draw($,0,0,i.width,i.height)),i&&requestAnimationFrame(ee)};requestAnimationFrame(ee),t(23,o=!0)}}else t(23,o=!1);n.$$.dirty[0]&4194360&&r&&(T?r.set_loop_region(v-1,k-1):r.set_loop_region(0,0)),n.$$.dirty[0]&4194308&&r&&r.set_render_ahead_time(_)},[i,l,_,T,v,k,s,p,u,X,L,g,I,M,d,P,q,J,Te,pe,Ae,Ee,r,o,Le,Me,Z,w,C,K]}class xt extends re{constructor(e){super(),se(this,e,Et,At,ne,{},null,[-1,-1])}}export{xt as component};
