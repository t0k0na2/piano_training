import{A as Fe,B as Ve,C as ge,D as ze,s as ne,f as w,a as S,g as h,h as O,E as F,c as N,d as E,j as c,i as U,x as b,F as q,y as H,G as X,H as qe,I as D,k as m,J as Q,K as Ne,l as Ie,m as Oe,n as Ce,o as We,p as ee,e as Be,L as me,M as ae}from"../chunks/scheduler.hdNUFy2D.js";import{g as He,t as W,c as je,a as G,S as re,i as se,f as oe,b as le,d as ue,m as ce,e as _e}from"../chunks/index.2nKtRfP8.js";function Re(n,e){const t=e.token={};function r(s,i,a,o){if(e.token!==t)return;e.resolved=o;let u=e.ctx;a!==void 0&&(u=u.slice(),u[a]=o);const _=s&&(e.current=s)(u);let p=!1;e.block&&(e.blocks?e.blocks.forEach((l,T)=>{T!==i&&l&&(He(),W(l,1,1,()=>{e.blocks[T]===l&&(e.blocks[T]=null)}),je())}):e.block.d(1),_.c(),G(_,1),_.m(e.mount(),e.anchor),p=!0),e.block=_,e.blocks&&(e.blocks[i]=_),p&&ze()}if(Fe(n)){const s=Ve();if(n.then(i=>{ge(s),r(e.then,1,e.value,i),ge(null)},i=>{if(ge(s),r(e.catch,2,e.error,i),ge(null),!e.hasCatch)throw i}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function Ge(n,e,t){const r=e.slice(),{resolved:s}=n;n.current===n.then&&(r[n.value]=s),n.current===n.catch&&(r[n.error]=s),n.block.p(r,t)}function Je(n){let e,t,r='<span class="material-symbols-outlined svelte-asyg6o">navigate_before</span>',s,i,a='<span class="material-symbols-outlined svelte-asyg6o">play_arrow</span>',o,u,_='<span class="material-symbols-outlined svelte-asyg6o">stop</span>',p,l,T='<span class="material-symbols-outlined svelte-asyg6o">pause</span>',g,A,x='<span class="material-symbols-outlined svelte-asyg6o">navigate_next</span>',y,I;return{c(){e=w("div"),t=w("button"),t.innerHTML=r,s=S(),i=w("button"),i.innerHTML=a,o=S(),u=w("button"),u.innerHTML=_,p=S(),l=w("button"),l.innerHTML=T,g=S(),A=w("button"),A.innerHTML=x,this.h()},l(L){e=h(L,"DIV",{id:!0,class:!0});var d=O(e);t=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(t)!=="svelte-l4t4zq"&&(t.innerHTML=r),s=N(d),i=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(i)!=="svelte-w43bq6"&&(i.innerHTML=a),o=N(d),u=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(u)!=="svelte-13vtwoq"&&(u.innerHTML=_),p=N(d),l=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(l)!=="svelte-e21jg0"&&(l.innerHTML=T),g=N(d),A=h(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(A)!=="svelte-uevd98"&&(A.innerHTML=x),d.forEach(E),this.h()},h(){c(t,"id","bar_prev_button"),c(t,"class","svelte-asyg6o"),c(i,"id","play_button"),c(i,"class","svelte-asyg6o"),c(u,"id","stop_button"),c(u,"class","svelte-asyg6o"),c(l,"id","pause_button"),c(l,"class","svelte-asyg6o"),c(A,"id","bar_next_button"),c(A,"class","svelte-asyg6o"),c(e,"id","transport"),c(e,"class","svelte-asyg6o")},m(L,d){U(L,e,d),b(e,t),b(e,s),b(e,i),b(e,o),b(e,u),b(e,p),b(e,l),b(e,g),b(e,A),y||(I=[q(t,"click",n[0]),q(i,"click",n[2]),q(u,"click",n[3]),q(l,"click",n[4]),q(A,"click",n[1])],y=!0)},p:H,i:H,o:H,d(L){L&&E(e),y=!1,X(I)}}}function Ye(n){const e=qe();function t(){e("prevbar")}function r(){e("nextbar")}function s(){e("play")}function i(){e("stop")}function a(){e("pause")}return[t,r,s,i,a]}class Ke extends re{constructor(e){super(),se(this,e,Ye,Je,ne,{})}}function Qe(n){let e,t,r="<ruby>速<rt>はや</rt></ruby>さ:",s,i,a,o,u,_,p,l,T,g;return{c(){e=w("span"),t=w("label"),t.innerHTML=r,s=S(),i=w("div"),a=w("datalist"),o=w("option"),u=w("option"),_=w("option"),p=S(),l=w("input"),this.h()},l(A){e=h(A,"SPAN",{});var x=O(e);t=h(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(t)!=="svelte-v3vmor"&&(t.innerHTML=r),s=N(x),i=h(x,"DIV",{style:!0,class:!0});var y=O(i);a=h(y,"DATALIST",{id:!0,class:!0});var I=O(a);o=h(I,"OPTION",{label:!0,class:!0}),O(o).forEach(E),u=h(I,"OPTION",{label:!0,class:!0}),O(u).forEach(E),_=h(I,"OPTION",{label:!0,class:!0}),O(_).forEach(E),I.forEach(E),p=N(y),l=h(y,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),y.forEach(E),x.forEach(E),this.h()},h(){c(t,"for","slider"),c(t,"class","responsive-font-medium svelte-1xnj73q"),o.__value="0.5",D(o,o.__value),c(o,"label","おそい"),c(o,"class","svelte-1xnj73q"),u.__value="1.0",D(u,u.__value),c(u,"label","ふつう"),c(u,"class","svelte-1xnj73q"),_.__value="1.5",D(_,_.__value),c(_,"label","はやい"),c(_,"class","svelte-1xnj73q"),c(a,"id","speed_values"),c(a,"class","svelte-1xnj73q"),m(l,"width","180px"),c(l,"type","range"),c(l,"id","slider"),c(l,"list","speed_values"),c(l,"min","0.5"),c(l,"max","1.5"),c(l,"step","0.1"),m(i,"display","inline-block"),c(i,"class","responsive-font-small svelte-1xnj73q")},m(A,x){U(A,e,x),b(e,t),b(e,s),b(e,i),b(i,a),b(a,o),b(a,u),b(a,_),b(i,p),b(i,l),D(l,n[0]),T||(g=[q(l,"change",n[1]),q(l,"input",n[1])],T=!0)},p(A,[x]){x&1&&D(l,A[0])},i:H,o:H,d(A){A&&E(e),T=!1,X(g)}}}function Xe(n,e,t){let{speed:r=1}=e;function s(){r=Q(this.value),t(0,r)}return n.$$set=i=>{"speed"in i&&t(0,r=i.speed)},[r,s]}class Ze extends re{constructor(e){super(),se(this,e,Xe,Qe,ne,{speed:0})}}function $e(n){let e,t,r="<ruby>表示量<rt>ひょうじりょう</rt></ruby>:",s,i,a,o,u,_,p,l,T,g;return{c(){e=w("span"),t=w("label"),t.innerHTML=r,s=S(),i=w("div"),a=w("datalist"),o=w("option"),u=w("option"),_=w("option"),p=S(),l=w("input"),this.h()},l(A){e=h(A,"SPAN",{});var x=O(e);t=h(x,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(t)!=="svelte-mxjbzg"&&(t.innerHTML=r),s=N(x),i=h(x,"DIV",{style:!0,class:!0});var y=O(i);a=h(y,"DATALIST",{id:!0,class:!0});var I=O(a);o=h(I,"OPTION",{label:!0,class:!0}),O(o).forEach(E),u=h(I,"OPTION",{label:!0,class:!0}),O(u).forEach(E),_=h(I,"OPTION",{label:!0,class:!0}),O(_).forEach(E),I.forEach(E),p=N(y),l=h(y,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),y.forEach(E),x.forEach(E),this.h()},h(){c(t,"for","display_slider"),c(t,"class","responsive-font-medium svelte-b33osa"),o.__value="1.0",D(o,o.__value),c(o,"label","すくない"),c(o,"class","svelte-b33osa"),u.__value="3.0",D(u,u.__value),c(u,"label","ふつう"),c(u,"class","svelte-b33osa"),_.__value="5.0",D(_,_.__value),c(_,"label","おおい"),c(_,"class","svelte-b33osa"),c(a,"id","display_values"),c(a,"class","svelte-b33osa"),m(l,"width","180px"),c(l,"type","range"),c(l,"id","display_slider"),c(l,"list","display_values"),c(l,"min","1.0"),c(l,"max","5.0"),c(l,"step","0.1"),m(i,"display","inline-block"),c(i,"class","responsive-font-small svelte-b33osa")},m(A,x){U(A,e,x),b(e,t),b(e,s),b(e,i),b(i,a),b(a,o),b(a,u),b(a,_),b(i,p),b(i,l),D(l,n[0]),T||(g=[q(l,"change",n[1]),q(l,"input",n[1])],T=!0)},p(A,[x]){x&1&&D(l,A[0])},i:H,o:H,d(A){A&&E(e),T=!1,X(g)}}}function et(n,e,t){let{display:r=3}=e;function s(){r=Q(this.value),t(0,r)}return n.$$set=i=>{"display"in i&&t(0,r=i.display)},[r,s]}class tt extends re{constructor(e){super(),se(this,e,et,$e,ne,{display:0})}}function nt(n){let e,t,r="<ruby>繰<rt>く</rt></ruby>り<ruby>返<rt>かえ</rt></ruby>し:",s,i,a,o,u,_="<ruby>範囲<rt>はんい</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",p,l,T,g,A="ー",x,y,I,L;return{c(){e=w("span"),t=w("label"),t.innerHTML=r,s=S(),i=w("input"),a=S(),o=w("span"),u=w("label"),u.innerHTML=_,p=S(),l=w("input"),T=S(),g=w("labe"),g.textContent=A,x=S(),y=w("input"),this.h()},l(d){e=h(d,"SPAN",{style:!0});var P=O(e);t=h(P,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(t)!=="svelte-1vayo76"&&(t.innerHTML=r),s=N(P),i=h(P,"INPUT",{id:!0,type:!0,style:!0}),a=N(P),o=h(P,"SPAN",{class:!0});var j=O(o);u=h(j,"LABEL",{for:!0,style:!0,class:!0,"data-svelte-h":!0}),F(u)!=="svelte-73dl4y"&&(u.innerHTML=_),p=N(j),l=h(j,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),T=N(j),g=h(j,"LABE",{style:!0,class:!0,"data-svelte-h":!0}),F(g)!=="svelte-19n9yl"&&(g.textContent=A),x=N(j),y=h(j,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),j.forEach(E),P.forEach(E),this.h()},h(){c(t,"for","region_loop_check"),c(t,"class","responsive-font-medium svelte-1nuzm0v"),c(i,"id","region_loop_check"),c(i,"type","checkbox"),m(i,"margin","0px"),m(i,"width","32px"),m(i,"height","32px"),c(u,"for","min_loop"),m(u,"margin-left","8px"),m(u,"margin-right","0px"),c(u,"class","responsive-font-medium svelte-1nuzm0v"),c(l,"type","number"),c(l,"id","min_loop"),c(l,"min","1"),c(l,"step","1"),l.required=!0,m(l,"margin","0px"),m(l,"width","3em"),m(l,"text-align","center"),m(l,"font-size","large"),m(g,"margin","4px"),c(g,"class","responsive-font-medium svelte-1nuzm0v"),c(y,"type","number"),c(y,"id","max_loop"),c(y,"min","1"),c(y,"step","1"),y.required=!0,m(y,"margin","0px"),m(y,"width","3em"),m(y,"text-align","center"),m(y,"font-size","large"),c(o,"class","svelte-1nuzm0v"),Ne(o,"hidden",n[0]===!1),m(e,"display","flex"),m(e,"align-items","center"),m(e,"margin-left","8px")},m(d,P){U(d,e,P),b(e,t),b(e,s),b(e,i),i.checked=n[0],b(e,a),b(e,o),b(o,u),b(o,p),b(o,l),D(l,n[1]),b(o,T),b(o,g),b(o,x),b(o,y),D(y,n[2]),I||(L=[q(i,"change",n[3]),q(l,"input",n[4]),q(y,"input",n[5])],I=!0)},p(d,[P]){P&1&&(i.checked=d[0]),P&2&&Q(l.value)!==d[1]&&D(l,d[1]),P&4&&Q(y.value)!==d[2]&&D(y,d[2]),P&1&&Ne(o,"hidden",d[0]===!1)},i:H,o:H,d(d){d&&E(e),I=!1,X(L)}}}function rt(n,e,t){let{enable:r=!1}=e,{begin:s=1}=e,{end:i=1}=e;function a(){r=this.checked,t(0,r)}function o(){s=Q(this.value),t(1,s)}function u(){i=Q(this.value),t(2,i)}return n.$$set=_=>{"enable"in _&&t(0,r=_.enable),"begin"in _&&t(1,s=_.begin),"end"in _&&t(2,i=_.end)},[r,s,i,a,o,u]}class st extends re{constructor(e){super(),se(this,e,rt,nt,ne,{enable:0,begin:1,end:2})}}function it(n){let e,t,r="<ruby>再生位置<rt>さいせいいち</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",s,i,a=n[0]+1+"",o,u,_,p,l;return{c(){e=w("span"),t=w("label"),t.innerHTML=r,s=S(),i=w("label"),o=Ie(a),u=S(),_=w("input"),this.h()},l(T){e=h(T,"SPAN",{style:!0});var g=O(e);t=h(g,"LABEL",{for:!0,style:!0,class:!0,"data-svelte-h":!0}),F(t)!=="svelte-147pt4x"&&(t.innerHTML=r),s=N(g),i=h(g,"LABEL",{for:!0,id:!0,style:!0,class:!0});var A=O(i);o=Oe(A,a),A.forEach(E),u=N(g),_=h(g,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0,style:!0}),g.forEach(E),this.h()},h(){c(t,"for","bar_slider"),m(t,"margin-left","4px"),c(t,"class","responsive-font-medium svelte-1y84s32"),c(i,"for","bar_slider"),c(i,"id","bar_label"),m(i,"width","3em"),m(i,"text-align","center"),c(i,"class","responsive-font-medium svelte-1y84s32"),c(_,"type","range"),c(_,"id","bar_slider"),c(_,"min","0"),c(_,"max",n[1]),c(_,"step","1"),m(_,"flex-grow","1"),m(_,"padding","0px"),m(e,"display","flex"),m(e,"align-items","center"),m(e,"flex-grow","1")},m(T,g){U(T,e,g),b(e,t),b(e,s),b(e,i),b(i,o),b(e,u),b(e,_),D(_,n[0]),p||(l=[q(_,"input",n[2]),q(_,"change",n[3]),q(_,"input",n[3])],p=!0)},p(T,[g]){g&1&&a!==(a=T[0]+1+"")&&Ce(o,a),g&2&&c(_,"max",T[1]),g&1&&D(_,T[0])},i:H,o:H,d(T){T&&E(e),p=!1,X(l)}}}function at(n,e,t){const r=qe();function s(u){r("input",{value:u.target.valueAsNumber})}let{value:i=0}=e,{max:a=100}=e;function o(){i=Q(this.value),t(0,i)}return n.$$set=u=>{"value"in u&&t(0,i=u.value),"max"in u&&t(1,a=u.max)},[i,a,s,o]}class ot extends re{constructor(e){super(),se(this,e,at,it,ne,{value:0,max:1})}}const lt=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:void 0;let M;const V=new Array(128).fill(void 0);V.push(void 0,null,!0,!1);function f(n){return V[n]}let be=V.length;function ut(n){n<132||(V[n]=be,be=n)}function te(n){const e=f(n);return ut(n),e}const De=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&De.decode();let fe=null;function we(){return(fe===null||fe.byteLength===0)&&(fe=new Uint8Array(M.memory.buffer)),fe}function J(n,e){return n=n>>>0,De.decode(we().subarray(n,n+e))}function k(n){be===V.length&&V.push(V.length+1);const e=be;return be=V[e],V[e]=n,e}function Me(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const s=n.description;return s==null?"Symbol":`Symbol(${s})`}if(e=="function"){const s=n.name;return typeof s=="string"&&s.length>0?`Function(${s})`:"Function"}if(Array.isArray(n)){const s=n.length;let i="[";s>0&&(i+=Me(n[0]));for(let a=1;a<s;a++)i+=", "+Me(n[a]);return i+="]",i}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}let Pe=0;const he=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ct=typeof he.encodeInto=="function"?function(n,e){return he.encodeInto(n,e)}:function(n,e){const t=he.encode(n);return e.set(t),{read:n.length,written:t.length}};function _t(n,e,t){if(t===void 0){const o=he.encode(n),u=e(o.length,1)>>>0;return we().subarray(u,u+o.length).set(o),Pe=o.length,u}let r=n.length,s=e(r,1)>>>0;const i=we();let a=0;for(;a<r;a++){const o=n.charCodeAt(a);if(o>127)break;i[s+a]=o}if(a!==r){a!==0&&(n=n.slice(a)),s=t(s,r,r=a+n.length*3,1)>>>0;const o=we().subarray(s+a,s+r),u=ct(n,o);a+=u.written}return Pe=a,s}let de=null;function ve(){return(de===null||de.byteLength===0)&&(de=new Int32Array(M.memory.buffer)),de}function ft(n,e,t,r){const s={a:n,b:e,cnt:1,dtor:t},i=(...a)=>{s.cnt++;const o=s.a;s.a=0;try{return r(o,s.b,...a)}finally{--s.cnt===0?M.__wbindgen_export_2.get(s.dtor)(o,s.b):s.a=o}};return i.original=s,i}function dt(n,e,t){M._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h978831c3e4267bae(n,e,k(t))}let ye=128;function bt(n){if(ye==1)throw new Error("out of js stack");return V[--ye]=n,ye}function R(n,e){try{return n.apply(this,e)}catch(t){M.__wbindgen_exn_store(k(t))}}function pt(n,e,t,r){M.wasm_bindgen__convert__closures__invoke2_mut__h04dd8e5622e8fd43(n,e,k(t),k(r))}class ke{static __wrap(e){e=e>>>0;const t=Object.create(ke.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();M.__wbg_randomaccessmidiplayer_free(e)}constructor(e){const t=M.randomaccessmidiplayer_new(k(e));return te(t)}num_bars(){return M.randomaccessmidiplayer_num_bars(this.__wbg_ptr)>>>0}render_ahead_time(){return M.randomaccessmidiplayer_render_ahead_time(this.__wbg_ptr)}set_render_ahead_time(e){M.randomaccessmidiplayer_set_render_ahead_time(this.__wbg_ptr,e)}time_per_pixel(e,t){return M.randomaccessmidiplayer_time_per_pixel(this.__wbg_ptr,e,t)}current_bar(){return M.randomaccessmidiplayer_current_bar(this.__wbg_ptr)>>>0}start(){M.randomaccessmidiplayer_start(this.__wbg_ptr)}set_loop_region(e,t){M.randomaccessmidiplayer_set_loop_region(this.__wbg_ptr,e,t)}seek_at_bar(e,t){M.randomaccessmidiplayer_seek_at_bar(this.__wbg_ptr,e,t)}seek_at_time(e,t){M.randomaccessmidiplayer_seek_at_time(this.__wbg_ptr,e,t)}skip(e,t){M.randomaccessmidiplayer_skip(this.__wbg_ptr,e,t)}stop(){M.randomaccessmidiplayer_stop(this.__wbg_ptr)}tick(e){M.randomaccessmidiplayer_tick(this.__wbg_ptr,e)}is_playing(){return M.randomaccessmidiplayer_is_playing(this.__wbg_ptr)!==0}draw(e,t,r,s,i){try{const u=M.__wbindgen_add_to_stack_pointer(-16);M.randomaccessmidiplayer_draw(u,this.__wbg_ptr,bt(e),t,r,s,i);var a=ve()[u/4+0],o=ve()[u/4+1];if(o)throw te(a)}finally{M.__wbindgen_add_to_stack_pointer(16),V[ye++]=void 0}}}async function gt(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function mt(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){te(e)},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(J(e,t));return k(r)},n.wbg.__wbindgen_string_new=function(e,t){const r=J(e,t);return k(r)},n.wbg.__wbg_randomaccessmidiplayer_new=function(e){const t=ke.__wrap(e);return k(t)},n.wbg.__wbg_setstrokeStyle_1b4551387606453b=function(e,t){f(e).strokeStyle=f(t)},n.wbg.__wbg_setfillStyle_1ebd7d8f502888fa=function(e,t){f(e).fillStyle=f(t)},n.wbg.__wbg_setfont_a622e8f71fcc67bd=function(e,t,r){f(e).font=J(t,r)},n.wbg.__wbg_settextAlign_425d121bce67eea6=function(e,t,r){f(e).textAlign=J(t,r)},n.wbg.__wbg_settextBaseline_ff6ae71131150241=function(e,t,r){f(e).textBaseline=J(t,r)},n.wbg.__wbg_beginPath_5c4c10cc904edc64=function(e){f(e).beginPath()},n.wbg.__wbg_fill_854920f07573dffd=function(e){f(e).fill()},n.wbg.__wbg_stroke_d6cd6e7c98952ff8=function(e){f(e).stroke()},n.wbg.__wbg_lineTo_ef21aebc726bbda0=function(e,t,r){f(e).lineTo(t,r)},n.wbg.__wbg_moveTo_23c53eed282c0730=function(e,t,r){f(e).moveTo(t,r)},n.wbg.__wbg_roundRect_5bc558db0fe10790=function(){return R(function(e,t,r,s,i,a){f(e).roundRect(t,r,s,i,a)},arguments)},n.wbg.__wbg_clearRect_d976768ba14de6f9=function(e,t,r,s,i){f(e).clearRect(t,r,s,i)},n.wbg.__wbg_fillRect_ae135cf52671cb3d=function(e,t,r,s,i){f(e).fillRect(t,r,s,i)},n.wbg.__wbg_strokeRect_eb3d071a52abca07=function(e,t,r,s,i){f(e).strokeRect(t,r,s,i)},n.wbg.__wbg_strokeText_a4c0b8e18d53ea7f=function(){return R(function(e,t,r,s,i){f(e).strokeText(J(t,r),s,i)},arguments)},n.wbg.__wbg_connect_7374783233c39eda=function(){return R(function(e,t){const r=f(e).connect(f(t));return k(r)},arguments)},n.wbg.__wbg_disconnect_13e3b9054333eb88=function(){return R(function(e){f(e).disconnect()},arguments)},n.wbg.__wbg_settype_15cd8054aebe6cbd=function(e,t){f(e).type=te(t)},n.wbg.__wbg_frequency_5cdcbcca8379b143=function(e){const t=f(e).frequency;return k(t)},n.wbg.__wbg_gain_ea4961e006680142=function(e){const t=f(e).gain;return k(t)},n.wbg.__wbg_arrayBuffer_a9d862b05aaee2f9=function(e){const t=f(e).arrayBuffer();return k(t)},n.wbg.__wbg_threshold_3334a9415a751f8f=function(e){const t=f(e).threshold;return k(t)},n.wbg.__wbg_knee_26a66de96fcff3d9=function(e){const t=f(e).knee;return k(t)},n.wbg.__wbg_ratio_bf0caf07ef32a1b1=function(e){const t=f(e).ratio;return k(t)},n.wbg.__wbg_destination_4d44007f7d08d71b=function(e){const t=f(e).destination;return k(t)},n.wbg.__wbg_currentTime_d2be936586614ff4=function(e){return f(e).currentTime},n.wbg.__wbg_new_db252a952beaf4fa=function(){return R(function(){const e=new lt;return k(e)},arguments)},n.wbg.__wbg_close_b87bff143de234d5=function(){return R(function(e){const t=f(e).close();return k(t)},arguments)},n.wbg.__wbg_createBiquadFilter_963b8ec8f335a87a=function(){return R(function(e){const t=f(e).createBiquadFilter();return k(t)},arguments)},n.wbg.__wbg_createDynamicsCompressor_831f19de62047bce=function(){return R(function(e){const t=f(e).createDynamicsCompressor();return k(t)},arguments)},n.wbg.__wbg_createGain_c702b552853e1a86=function(){return R(function(e){const t=f(e).createGain();return k(t)},arguments)},n.wbg.__wbg_createOscillator_33e2fb4cedf63575=function(){return R(function(e){const t=f(e).createOscillator();return k(t)},arguments)},n.wbg.__wbg_value_d7acd600733d8062=function(e){return f(e).value},n.wbg.__wbg_setvalue_6d68fd7da7d604f9=function(e,t){f(e).value=t},n.wbg.__wbg_exponentialRampToValueAtTime_5cdafb7091d2faf6=function(){return R(function(e,t,r){const s=f(e).exponentialRampToValueAtTime(t,r);return k(s)},arguments)},n.wbg.__wbg_linearRampToValueAtTime_d7663013272d6c74=function(){return R(function(e,t,r){const s=f(e).linearRampToValueAtTime(t,r);return k(s)},arguments)},n.wbg.__wbg_setTargetAtTime_70ccc68d17235e73=function(){return R(function(e,t,r,s){const i=f(e).setTargetAtTime(t,r,s);return k(i)},arguments)},n.wbg.__wbg_setValueAtTime_6460f895778e5046=function(){return R(function(e,t,r){const s=f(e).setValueAtTime(t,r);return k(s)},arguments)},n.wbg.__wbg_settype_523bfbd496f822de=function(e,t){f(e).type=te(t)},n.wbg.__wbg_frequency_2dccb3ae0f823e46=function(e){const t=f(e).frequency;return k(t)},n.wbg.__wbg_start_58f106eeea44565c=function(){return R(function(e,t){f(e).start(t)},arguments)},n.wbg.__wbindgen_cb_drop=function(e){const t=te(e).original;return t.cnt--==1?(t.a=0,!0):!1},n.wbg.__wbg_queueMicrotask_4d890031a6a5a50c=function(e){queueMicrotask(f(e))},n.wbg.__wbg_queueMicrotask_adae4bc085237231=function(e){const t=f(e).queueMicrotask;return k(t)},n.wbg.__wbindgen_is_function=function(e){return typeof f(e)=="function"},n.wbg.__wbg_newnoargs_c62ea9419c21fbac=function(e,t){const r=new Function(J(e,t));return k(r)},n.wbg.__wbg_call_90c26b09837aba1c=function(){return R(function(e,t){const r=f(e).call(f(t));return k(r)},arguments)},n.wbg.__wbg_self_f0e34d89f33b99fd=function(){return R(function(){const e=self.self;return k(e)},arguments)},n.wbg.__wbg_window_d3b084224f4774d7=function(){return R(function(){const e=window.window;return k(e)},arguments)},n.wbg.__wbg_globalThis_9caa27ff917c6860=function(){return R(function(){const e=globalThis.globalThis;return k(e)},arguments)},n.wbg.__wbg_global_35dfdd59a4da3e74=function(){return R(function(){const e=global.global;return k(e)},arguments)},n.wbg.__wbindgen_is_undefined=function(e){return f(e)===void 0},n.wbg.__wbg_call_5da1969d7cd31ccd=function(){return R(function(e,t,r){const s=f(e).call(f(t),f(r));return k(s)},arguments)},n.wbg.__wbg_new_60f57089c7563e81=function(e,t){try{var r={a:e,b:t},s=(a,o)=>{const u=r.a;r.a=0;try{return pt(u,r.b,a,o)}finally{r.a=u}};const i=new Promise(s);return k(i)}finally{r.a=r.b=0}},n.wbg.__wbg_resolve_6e1c6553a82f85b7=function(e){const t=Promise.resolve(f(e));return k(t)},n.wbg.__wbg_then_3ab08cd4fbb91ae9=function(e,t){const r=f(e).then(f(t));return k(r)},n.wbg.__wbg_then_8371cc12cfedc5a2=function(e,t,r){const s=f(e).then(f(t),f(r));return k(s)},n.wbg.__wbg_buffer_a448f833075b71ba=function(e){const t=f(e).buffer;return k(t)},n.wbg.__wbg_new_8f67e318f15d7254=function(e){const t=new Uint8Array(f(e));return k(t)},n.wbg.__wbg_set_2357bf09366ee480=function(e,t,r){f(e).set(f(t),r>>>0)},n.wbg.__wbg_length_1d25fa9e4ac21ce7=function(e){return f(e).length},n.wbg.__wbindgen_object_clone_ref=function(e){const t=f(e);return k(t)},n.wbg.__wbindgen_debug_string=function(e,t){const r=Me(f(t)),s=_t(r,M.__wbindgen_malloc,M.__wbindgen_realloc),i=Pe;ve()[e/4+1]=i,ve()[e/4+0]=s},n.wbg.__wbindgen_throw=function(e,t){throw new Error(J(e,t))},n.wbg.__wbindgen_memory=function(){const e=M.memory;return k(e)},n.wbg.__wbindgen_closure_wrapper591=function(e,t,r){const s=ft(e,t,78,dt);return k(s)},n}function wt(n,e){return M=n.exports,Ue.__wbindgen_wasm_module=e,de=null,fe=null,M}async function Ue(n){if(M!==void 0)return M;typeof n>"u"&&(n=new URL(""+new URL("../assets/t0k0_audio_bg.YS3u4Cx3.wasm",import.meta.url).href,import.meta.url));const e=mt();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await gt(await n,e);return wt(t,r)}function ht(n){let e,t,r,s={ctx:n,current:null,token:null,hasCatch:!0,pending:Tt,then:kt,catch:vt,value:31,error:32,blocks:[,,,]};return Re(t=n[6],s),{c(){e=Be(),s.block.c()},l(i){e=Be(),s.block.l(i)},m(i,a){U(i,e,a),s.block.m(i,s.anchor=a),s.mount=()=>e.parentNode,s.anchor=e,r=!0},p(i,a){n=i,s.ctx=n,a[0]&64&&t!==(t=n[6])&&Re(t,s)||Ge(s,n,a)},i(i){r||(G(s.block),r=!0)},o(i){for(let a=0;a<3;a+=1){const o=s.blocks[a];W(o)}r=!1},d(i){i&&E(e),s.block.d(i),s.token=null,s=null}}}function yt(n){let e,t="<ruby>練習<rt>れんしゅう</rt>したい</ruby>MIDIファイルを<ruby>開<rt>ひら</rt>いてください</ruby>";return{c(){e=w("p"),e.innerHTML=t},l(r){e=h(r,"P",{"data-svelte-h":!0}),F(e)!=="svelte-174toub"&&(e.innerHTML=t)},m(r,s){U(r,e,s)},p:H,i:H,o:H,d(r){r&&E(e)}}}function vt(n){let e,t=n[32].message+"",r;return{c(){e=w("p"),r=Ie(t),this.h()},l(s){e=h(s,"P",{style:!0});var i=O(e);r=Oe(i,t),i.forEach(E),this.h()},h(){m(e,"color","red")},m(s,i){U(s,e,i),b(e,r)},p(s,i){i[0]&64&&t!==(t=s[32].message+"")&&Ce(r,t)},i:H,o:H,d(s){s&&E(e)}}}function kt(n){let e,t,r,s,i,a,o,u,_,p,l,T,g,A,x,y,I,L,d,P,j,Y;t=new Ke({}),t.$on("prevbar",n[19]),t.$on("nextbar",n[20]),t.$on("play",n[16]),t.$on("stop",n[18]),t.$on("pause",n[17]);function Te(v){n[24](v)}let pe={};n[1]!==void 0&&(pe.speed=n[1]),s=new Ze({props:pe}),ee.push(()=>oe(s,"speed",Te));function Ae(v){n[25](v)}let Z={};n[2]!==void 0&&(Z.display=n[2]),o=new tt({props:Z}),ee.push(()=>oe(o,"display",Ae)),l=new ot({props:{value:n[7],max:n[8]}}),l.$on("input",n[10]);function Ee(v){n[26](v)}function Le(v){n[27](v)}function xe(v){n[28](v)}let $={};return n[3]!==void 0&&($.enable=n[3]),n[4]!==void 0&&($.begin=n[4]),n[5]!==void 0&&($.end=n[5]),g=new st({props:$}),ee.push(()=>oe(g,"enable",Ee)),ee.push(()=>oe(g,"begin",Le)),ee.push(()=>oe(g,"end",xe)),{c(){e=w("div"),le(t.$$.fragment),r=S(),le(s.$$.fragment),a=S(),le(o.$$.fragment),_=S(),p=w("div"),le(l.$$.fragment),T=S(),le(g.$$.fragment),I=S(),L=w("div"),d=w("canvas"),this.h()},l(v){e=h(v,"DIV",{style:!0});var B=O(e);ue(t.$$.fragment,B),r=N(B),ue(s.$$.fragment,B),a=N(B),ue(o.$$.fragment,B),B.forEach(E),_=N(v),p=h(v,"DIV",{style:!0});var z=O(p);ue(l.$$.fragment,z),T=N(z),ue(g.$$.fragment,z),z.forEach(E),I=N(v),L=h(v,"DIV",{style:!0});var C=O(L);d=h(C,"CANVAS",{id:!0,style:!0}),O(d).forEach(E),C.forEach(E),this.h()},h(){m(e,"width","100%"),m(e,"display","flex"),m(e,"flex-direction","row"),m(e,"justify-content","space-evenly"),m(e,"align-items","center"),m(p,"width","95%"),m(p,"display","flex"),m(p,"flex-direction","row"),c(d,"id","canvas"),m(d,"width","96%"),m(d,"height","96%"),m(d,"left","2%"),m(d,"top","2%"),m(d,"position","relative"),m(d,"touch-action","pan-y"),m(d,"touch-action","pan-x"),m(L,"flex-grow","1"),m(L,"width","100%")},m(v,B){U(v,e,B),ce(t,e,null),b(e,r),ce(s,e,null),b(e,a),ce(o,e,null),U(v,_,B),U(v,p,B),ce(l,p,null),b(p,T),ce(g,p,null),U(v,I,B),U(v,L,B),b(L,d),n[29](d),P=!0,j||(Y=[q(d,"pointerdown",me(n[12])),q(d,"pointermove",me(n[13])),q(d,"pointerup",me(n[14])),q(d,"pointercancel",me(n[15]))],j=!0)},p(v,B){const z={};!i&&B[0]&2&&(i=!0,z.speed=v[1],ae(()=>i=!1)),s.$set(z);const C={};!u&&B[0]&4&&(u=!0,C.display=v[2],ae(()=>u=!1)),o.$set(C);const ie={};B[0]&128&&(ie.value=v[7]),B[0]&256&&(ie.max=v[8]),l.$set(ie);const K={};!A&&B[0]&8&&(A=!0,K.enable=v[3],ae(()=>A=!1)),!x&&B[0]&16&&(x=!0,K.begin=v[4],ae(()=>x=!1)),!y&&B[0]&32&&(y=!0,K.end=v[5],ae(()=>y=!1)),g.$set(K)},i(v){P||(G(t.$$.fragment,v),G(s.$$.fragment,v),G(o.$$.fragment,v),G(l.$$.fragment,v),G(g.$$.fragment,v),P=!0)},o(v){W(t.$$.fragment,v),W(s.$$.fragment,v),W(o.$$.fragment,v),W(l.$$.fragment,v),W(g.$$.fragment,v),P=!1},d(v){v&&(E(e),E(_),E(p),E(I),E(L)),_e(t),_e(s),_e(o),_e(l),_e(g),n[29](null),j=!1,X(Y)}}}function Tt(n){let e,t="MIDIファイルを<ruby>開<rt>ひら</rt>いています</ruby>........";return{c(){e=w("p"),e.innerHTML=t},l(r){e=h(r,"P",{"data-svelte-h":!0}),F(e)!=="svelte-b1iy1"&&(e.innerHTML=t)},m(r,s){U(r,e,s)},p:H,i:H,o:H,d(r){r&&E(e)}}}function At(n){let e,t,r,s,i,a,o,u,_,p,l,T,g,A;const x=[yt,ht],y=[];function I(L,d){return L[6]==null?0:1}return p=I(n),l=y[p]=x[p](n),{c(){e=w("div"),t=S(),r=w("div"),s=w("input"),i=S(),a=w("button"),o=w("span"),u=Ie(n[9]),_=S(),l.c(),this.h()},l(L){e=h(L,"DIV",{id:!0,class:!0});var d=O(e);t=N(d),r=h(d,"DIV",{style:!0});var P=O(r);s=h(P,"INPUT",{type:!0,id:!0,name:!0,accept:!0,style:!0}),P.forEach(E),i=N(d),a=h(d,"BUTTON",{id:!0,class:!0});var j=O(a);o=h(j,"SPAN",{class:!0});var Y=O(o);u=Oe(Y,n[9]),Y.forEach(E),j.forEach(E),_=N(d),l.l(d),d.forEach(E),this.h()},h(){c(s,"type","file"),c(s,"id","midi-open"),c(s,"name","midi-open"),c(s,"accept",".mid"),m(s,"font-size","medium"),m(r,"padding","4px"),c(o,"class","material-symbols-outlined svelte-nanmym"),c(a,"id","fullscreen-button"),c(a,"class","svelte-nanmym"),c(e,"id","frame"),c(e,"class","svelte-nanmym")},m(L,d){U(L,e,d),b(e,t),b(e,r),b(r,s),b(e,i),b(e,a),b(a,o),b(o,u),b(e,_),y[p].m(e,null),T=!0,g||(A=[q(s,"change",n[11]),q(a,"click",n[21])],g=!0)},p(L,d){(!T||d[0]&512)&&Ce(u,L[9]);let P=p;p=I(L),p===P?y[p].p(L,d):(He(),W(y[P],1,1,()=>{y[P]=null}),je(),l=y[p],l?l.p(L,d):(l=y[p]=x[p](L),l.c()),G(l,1),l.m(e,null))},i(L){T||(G(l),T=!0)},o(L){W(l),T=!1},d(L){L&&E(e),y[p].d(),g=!1,X(A)}}}function Et(n,e,t){let r=null,s=null,i=null,a=!1,o=!1,u=1,_=3,p=0,l=100,T=!1,g=1,A=1;function x(C){t(7,p=C.detail.value),r.seek_at_bar(p,!0)}We(async()=>{await Ue()});async function y(){this.files.length>0&&(r&&(r.stop(),r.free(),t(22,r=null)),t(6,s=new ke(this.files[0])),t(22,r=await s),t(8,l=r.num_bars()-1))}function I(){r&&(a=!0)}function L(C){a&&r.skip(C.movementY*r.time_per_pixel(0,i.height))}function d(){a&&(a=!1)}function P(){a&&(a=!1)}function j(){r&&r.is_playing()===!1&&r.start()}function Y(){r&&r.is_playing()&&r.stop()}function Te(){r&&(r.is_playing()&&r.stop(),r.seek_at_bar(0,!0))}function pe(){r&&r.current_bar()>0&&r.seek_at_bar(r.current_bar()-1,!0)}function Ae(){r&&r.seek_at_bar(r.current_bar()+1,!0)}let Z="fullscreen";function Ee(){document.fullscreenElement?(document.exitFullscreen(),t(9,Z="fullscreen")):(document.body.requestFullscreen(),t(9,Z="fullscreen_Exit"))}function Le(C){u=C,t(1,u)}function xe(C){_=C,t(2,_)}function $(C){T=C,t(3,T)}function v(C){g=C,t(4,g)}function B(C){A=C,t(5,A)}function z(C){ee[C?"unshift":"push"](()=>{i=C,t(0,i),t(23,o),t(22,r),t(1,u)})}return n.$$.update=()=>{if(n.$$.dirty[0]&12582915)if(i){if(o===!1){new ResizeObserver(Se=>{t(0,i.width=Se[0].contentRect.width,i),t(0,i.height=Se[0].contentRect.height,i)}).observe(i);const ie=i.getContext("2d"),K=()=>{r&&i&&(r.tick(u),t(7,p=r.current_bar()),r.draw(ie,0,0,i.width,i.height)),i&&requestAnimationFrame(K)};requestAnimationFrame(K),t(23,o=!0)}}else t(23,o=!1);n.$$.dirty[0]&4194360&&r&&(T?r.set_loop_region(g-1,A-1):r.set_loop_region(0,0)),n.$$.dirty[0]&4194308&&r&&r.set_render_ahead_time(_)},[i,u,_,T,g,A,s,p,l,Z,x,y,I,L,d,P,j,Y,Te,pe,Ae,Ee,r,o,Le,xe,$,v,B,z]}class Mt extends re{constructor(e){super(),se(this,e,Et,At,ne,{},null,[-1,-1])}}export{Mt as component};
