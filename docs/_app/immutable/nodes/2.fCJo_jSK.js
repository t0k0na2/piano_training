import{A as qe,B as Ve,C as ge,D as Fe,s as ne,f as h,a as N,g as w,h as O,E as q,c as R,d as A,j as c,i as j,x as b,F as H,y as B,G as Q,H as ze,k as g,I as U,J as Y,K as Ne,l as Ie,m as Oe,n as Ce,o as We,p as te,e as Re,L as me,M as se}from"../chunks/scheduler.hdNUFy2D.js";import{g as Be,t as F,c as De,a as W,S as re,i as ie,f as ae,b as oe,d as le,m as ue,e as ce}from"../chunks/index.2nKtRfP8.js";function He(n,e){const t=e.token={};function r(i,s,a,o){if(e.token!==t)return;e.resolved=o;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=o);const _=i&&(e.current=i)(l);let p=!1;e.block&&(e.blocks?e.blocks.forEach((u,T)=>{T!==s&&u&&(Be(),F(u,1,1,()=>{e.blocks[T]===u&&(e.blocks[T]=null)}),De())}):e.block.d(1),_.c(),W(_,1),_.m(e.mount(),e.anchor),p=!0),e.block=_,e.blocks&&(e.blocks[s]=_),p&&Fe()}if(qe(n)){const i=Ve();if(n.then(s=>{ge(i),r(e.then,1,e.value,s),ge(null)},s=>{if(ge(i),r(e.catch,2,e.error,s),ge(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,n),!0;e.resolved=n}}function Ge(n,e,t){const r=e.slice(),{resolved:i}=n;n.current===n.then&&(r[n.value]=i),n.current===n.catch&&(r[n.error]=i),n.block.p(r,t)}function Je(n){let e,t,r='<span class="material-symbols-outlined svelte-zmevxb">navigate_before</span>',i,s,a='<span class="material-symbols-outlined svelte-zmevxb">play_arrow</span>',o,l,_='<span class="material-symbols-outlined svelte-zmevxb">stop</span>',p,u,T='<span class="material-symbols-outlined svelte-zmevxb">pause</span>',v,k,E='<span class="material-symbols-outlined svelte-zmevxb">navigate_next</span>',m,I;return{c(){e=h("div"),t=h("button"),t.innerHTML=r,i=N(),s=h("button"),s.innerHTML=a,o=N(),l=h("button"),l.innerHTML=_,p=N(),u=h("button"),u.innerHTML=T,v=N(),k=h("button"),k.innerHTML=E,this.h()},l(L){e=w(L,"DIV",{id:!0,class:!0});var d=O(e);t=w(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(t)!=="svelte-l4t4zq"&&(t.innerHTML=r),i=R(d),s=w(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(s)!=="svelte-w43bq6"&&(s.innerHTML=a),o=R(d),l=w(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(l)!=="svelte-13vtwoq"&&(l.innerHTML=_),p=R(d),u=w(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(u)!=="svelte-e21jg0"&&(u.innerHTML=T),v=R(d),k=w(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(k)!=="svelte-uevd98"&&(k.innerHTML=E),d.forEach(A),this.h()},h(){c(t,"id","bar_prev_button"),c(t,"class","svelte-zmevxb"),c(s,"id","play_button"),c(s,"class","svelte-zmevxb"),c(l,"id","stop_button"),c(l,"class","svelte-zmevxb"),c(u,"id","pause_button"),c(u,"class","svelte-zmevxb"),c(k,"id","bar_next_button"),c(k,"class","svelte-zmevxb"),c(e,"id","transport"),c(e,"class","svelte-zmevxb")},m(L,d){j(L,e,d),b(e,t),b(e,i),b(e,s),b(e,o),b(e,l),b(e,p),b(e,u),b(e,v),b(e,k),m||(I=[H(t,"click",n[0]),H(s,"click",n[2]),H(l,"click",n[3]),H(u,"click",n[4]),H(k,"click",n[1])],m=!0)},p:B,i:B,o:B,d(L){L&&A(e),m=!1,Q(I)}}}function Ke(n){const e=ze();function t(){e("prevbar")}function r(){e("nextbar")}function i(){e("play")}function s(){e("stop")}function a(){e("pause")}return[t,r,i,s,a]}class Ye extends re{constructor(e){super(),ie(this,e,Ke,Je,ne,{})}}function Qe(n){let e,t,r="<ruby>速<rt>はや</rt></ruby>さ:",i,s,a,o,l,_,p,u,T,v;return{c(){e=h("span"),t=h("label"),t.innerHTML=r,i=N(),s=h("div"),a=h("datalist"),o=h("option"),l=h("option"),_=h("option"),p=N(),u=h("input"),this.h()},l(k){e=w(k,"SPAN",{});var E=O(e);t=w(E,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),q(t)!=="svelte-5u4gq2"&&(t.innerHTML=r),i=R(E),s=w(E,"DIV",{style:!0});var m=O(s);a=w(m,"DATALIST",{id:!0,class:!0});var I=O(a);o=w(I,"OPTION",{label:!0,class:!0}),O(o).forEach(A),l=w(I,"OPTION",{label:!0,class:!0}),O(l).forEach(A),_=w(I,"OPTION",{label:!0,class:!0}),O(_).forEach(A),I.forEach(A),p=R(m),u=w(m,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),m.forEach(A),E.forEach(A),this.h()},h(){c(t,"for","slider"),g(t,"font-size","medium"),o.__value="0.5",U(o,o.__value),c(o,"label","おそい"),c(o,"class","svelte-fa9n55"),l.__value="1.0",U(l,l.__value),c(l,"label","ふつう"),c(l,"class","svelte-fa9n55"),_.__value="1.5",U(_,_.__value),c(_,"label","はやい"),c(_,"class","svelte-fa9n55"),c(a,"id","speed_values"),c(a,"class","svelte-fa9n55"),g(u,"width","180px"),c(u,"type","range"),c(u,"id","slider"),c(u,"list","speed_values"),c(u,"min","0.5"),c(u,"max","1.5"),c(u,"step","0.1"),g(s,"display","inline-block")},m(k,E){j(k,e,E),b(e,t),b(e,i),b(e,s),b(s,a),b(a,o),b(a,l),b(a,_),b(s,p),b(s,u),U(u,n[0]),T||(v=[H(u,"change",n[1]),H(u,"input",n[1])],T=!0)},p(k,[E]){E&1&&U(u,k[0])},i:B,o:B,d(k){k&&A(e),T=!1,Q(v)}}}function Xe(n,e,t){let{speed:r=1}=e;function i(){r=Y(this.value),t(0,r)}return n.$$set=s=>{"speed"in s&&t(0,r=s.speed)},[r,i]}class Ze extends re{constructor(e){super(),ie(this,e,Xe,Qe,ne,{speed:0})}}function $e(n){let e,t,r="<ruby>表示量<rt>ひょうじりょう</rt></ruby>:",i,s,a,o,l,_,p,u,T,v;return{c(){e=h("span"),t=h("label"),t.innerHTML=r,i=N(),s=h("div"),a=h("datalist"),o=h("option"),l=h("option"),_=h("option"),p=N(),u=h("input"),this.h()},l(k){e=w(k,"SPAN",{});var E=O(e);t=w(E,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),q(t)!=="svelte-evxx65"&&(t.innerHTML=r),i=R(E),s=w(E,"DIV",{style:!0});var m=O(s);a=w(m,"DATALIST",{id:!0,class:!0});var I=O(a);o=w(I,"OPTION",{label:!0,class:!0}),O(o).forEach(A),l=w(I,"OPTION",{label:!0,class:!0}),O(l).forEach(A),_=w(I,"OPTION",{label:!0,class:!0}),O(_).forEach(A),I.forEach(A),p=R(m),u=w(m,"INPUT",{style:!0,type:!0,id:!0,list:!0,min:!0,max:!0,step:!0}),m.forEach(A),E.forEach(A),this.h()},h(){c(t,"for","display_slider"),g(t,"font-size","medium"),o.__value="1.0",U(o,o.__value),c(o,"label","すくない"),c(o,"class","svelte-fa9n55"),l.__value="3.0",U(l,l.__value),c(l,"label","ふつう"),c(l,"class","svelte-fa9n55"),_.__value="5.0",U(_,_.__value),c(_,"label","おおい"),c(_,"class","svelte-fa9n55"),c(a,"id","display_values"),c(a,"class","svelte-fa9n55"),g(u,"width","180px"),c(u,"type","range"),c(u,"id","display_slider"),c(u,"list","display_values"),c(u,"min","1.0"),c(u,"max","5.0"),c(u,"step","0.1"),g(s,"display","inline-block")},m(k,E){j(k,e,E),b(e,t),b(e,i),b(e,s),b(s,a),b(a,o),b(a,l),b(a,_),b(s,p),b(s,u),U(u,n[0]),T||(v=[H(u,"change",n[1]),H(u,"input",n[1])],T=!0)},p(k,[E]){E&1&&U(u,k[0])},i:B,o:B,d(k){k&&A(e),T=!1,Q(v)}}}function et(n,e,t){let{display:r=3}=e;function i(){r=Y(this.value),t(0,r)}return n.$$set=s=>{"display"in s&&t(0,r=s.display)},[r,i]}class tt extends re{constructor(e){super(),ie(this,e,et,$e,ne,{display:0})}}function nt(n){let e,t,r="<ruby>繰<rt>く</rt></ruby>り<ruby>返<rt>かえ</rt></ruby>し:",i,s,a,o,l,_="<ruby>範囲<rt>はんい</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",p,u,T,v,k="ー",E,m,I,L;return{c(){e=h("span"),t=h("label"),t.innerHTML=r,i=N(),s=h("input"),a=N(),o=h("span"),l=h("label"),l.innerHTML=_,p=N(),u=h("input"),T=N(),v=h("labe"),v.textContent=k,E=N(),m=h("input"),this.h()},l(d){e=w(d,"SPAN",{style:!0});var P=O(e);t=w(P,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),q(t)!=="svelte-xvcnro"&&(t.innerHTML=r),i=R(P),s=w(P,"INPUT",{id:!0,type:!0,style:!0}),a=R(P),o=w(P,"SPAN",{class:!0});var D=O(o);l=w(D,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),q(l)!=="svelte-1omed3k"&&(l.innerHTML=_),p=R(D),u=w(D,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),T=R(D),v=w(D,"LABE",{style:!0,"data-svelte-h":!0}),q(v)!=="svelte-15jvtlh"&&(v.textContent=k),E=R(D),m=w(D,"INPUT",{type:!0,id:!0,min:!0,step:!0,style:!0}),D.forEach(A),P.forEach(A),this.h()},h(){c(t,"for","region_loop_check"),g(t,"font-size","medium"),c(s,"id","region_loop_check"),c(s,"type","checkbox"),g(s,"margin","0px"),g(s,"width","32px"),g(s,"height","32px"),c(l,"for","min_loop"),g(l,"margin-left","8px"),g(l,"margin-right","0px"),g(l,"font-size","medium"),c(u,"type","number"),c(u,"id","min_loop"),c(u,"min","1"),c(u,"step","1"),u.required=!0,g(u,"margin","0px"),g(u,"width","48px"),g(u,"text-align","center"),g(u,"font-size","large"),g(v,"margin","4px"),g(v,"font-size","small"),c(m,"type","number"),c(m,"id","max_loop"),c(m,"min","1"),c(m,"step","1"),m.required=!0,g(m,"margin","0px"),g(m,"width","48px"),g(m,"text-align","center"),g(m,"font-size","large"),c(o,"class","svelte-1jbmgfw"),Ne(o,"hidden",n[0]===!1),g(e,"display","flex"),g(e,"align-items","center")},m(d,P){j(d,e,P),b(e,t),b(e,i),b(e,s),s.checked=n[0],b(e,a),b(e,o),b(o,l),b(o,p),b(o,u),U(u,n[1]),b(o,T),b(o,v),b(o,E),b(o,m),U(m,n[2]),I||(L=[H(s,"change",n[3]),H(u,"input",n[4]),H(m,"input",n[5])],I=!0)},p(d,[P]){P&1&&(s.checked=d[0]),P&2&&Y(u.value)!==d[1]&&U(u,d[1]),P&4&&Y(m.value)!==d[2]&&U(m,d[2]),P&1&&Ne(o,"hidden",d[0]===!1)},i:B,o:B,d(d){d&&A(e),I=!1,Q(L)}}}function rt(n,e,t){let{enable:r=!1}=e,{begin:i=1}=e,{end:s=1}=e;function a(){r=this.checked,t(0,r)}function o(){i=Y(this.value),t(1,i)}function l(){s=Y(this.value),t(2,s)}return n.$$set=_=>{"enable"in _&&t(0,r=_.enable),"begin"in _&&t(1,i=_.begin),"end"in _&&t(2,s=_.end)},[r,i,s,a,o,l]}class it extends re{constructor(e){super(),ie(this,e,rt,nt,ne,{enable:0,begin:1,end:2})}}function st(n){let e,t,r="<ruby>再生位置<rt>さいせいいち</rt></ruby>(<ruby>小節<rt>しょうせつ</rt></ruby>):",i,s,a=n[0]+1+"",o,l,_,p,u;return{c(){e=h("span"),t=h("label"),t.innerHTML=r,i=N(),s=h("label"),o=Ie(a),l=N(),_=h("input"),this.h()},l(T){e=w(T,"SPAN",{style:!0});var v=O(e);t=w(v,"LABEL",{for:!0,style:!0,"data-svelte-h":!0}),q(t)!=="svelte-1g3f3rb"&&(t.innerHTML=r),i=R(v),s=w(v,"LABEL",{for:!0,id:!0,style:!0});var k=O(s);o=Oe(k,a),k.forEach(A),l=R(v),_=w(v,"INPUT",{type:!0,id:!0,min:!0,max:!0,step:!0,style:!0}),v.forEach(A),this.h()},h(){c(t,"for","bar_slider"),g(t,"margin-left","4px"),g(t,"font-size","medium"),c(s,"for","bar_slider"),c(s,"id","bar_label"),g(s,"width","48px"),g(s,"text-align","center"),g(s,"font-size","large"),c(_,"type","range"),c(_,"id","bar_slider"),c(_,"min","0"),c(_,"max",n[1]),c(_,"step","1"),g(_,"flex-grow","1"),g(_,"padding","0px"),g(e,"display","flex"),g(e,"align-items","center")},m(T,v){j(T,e,v),b(e,t),b(e,i),b(e,s),b(s,o),b(e,l),b(e,_),U(_,n[0]),p||(u=[H(_,"input",n[2]),H(_,"change",n[3]),H(_,"input",n[3])],p=!0)},p(T,[v]){v&1&&a!==(a=T[0]+1+"")&&Ce(o,a),v&2&&c(_,"max",T[1]),v&1&&U(_,T[0])},i:B,o:B,d(T){T&&A(e),p=!1,Q(u)}}}function at(n,e,t){const r=ze();function i(l){r("input",{value:l.target.valueAsNumber})}let{value:s=0}=e,{max:a=100}=e;function o(){s=Y(this.value),t(0,s)}return n.$$set=l=>{"value"in l&&t(0,s=l.value),"max"in l&&t(1,a=l.max)},[s,a,i,o]}class ot extends re{constructor(e){super(),ie(this,e,at,st,ne,{value:0,max:1})}}const lt=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:void 0;let M;const V=new Array(128).fill(void 0);V.push(void 0,null,!0,!1);function f(n){return V[n]}let de=V.length;function ut(n){n<132||(V[n]=de,de=n)}function be(n){const e=f(n);return ut(n),e}const Ue=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ue.decode();let _e=null;function he(){return(_e===null||_e.byteLength===0)&&(_e=new Uint8Array(M.memory.buffer)),_e}function G(n,e){return n=n>>>0,Ue.decode(he().subarray(n,n+e))}function x(n){de===V.length&&V.push(V.length+1);const e=de;return de=V[e],V[e]=n,e}function Me(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const i=n.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=n.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(n)){const i=n.length;let s="[";i>0&&(s+=Me(n[0]));for(let a=1;a<i;a++)s+=", "+Me(n[a]);return s+="]",s}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}let Pe=0;const we=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ct=typeof we.encodeInto=="function"?function(n,e){return we.encodeInto(n,e)}:function(n,e){const t=we.encode(n);return e.set(t),{read:n.length,written:t.length}};function _t(n,e,t){if(t===void 0){const o=we.encode(n),l=e(o.length,1)>>>0;return he().subarray(l,l+o.length).set(o),Pe=o.length,l}let r=n.length,i=e(r,1)>>>0;const s=he();let a=0;for(;a<r;a++){const o=n.charCodeAt(a);if(o>127)break;s[i+a]=o}if(a!==r){a!==0&&(n=n.slice(a)),i=t(i,r,r=a+n.length*3,1)>>>0;const o=he().subarray(i+a,i+r),l=ct(n,o);a+=l.written}return Pe=a,i}let fe=null;function ve(){return(fe===null||fe.byteLength===0)&&(fe=new Int32Array(M.memory.buffer)),fe}function ft(n,e,t,r){const i={a:n,b:e,cnt:1,dtor:t},s=(...a)=>{i.cnt++;const o=i.a;i.a=0;try{return r(o,i.b,...a)}finally{--i.cnt===0?M.__wbindgen_export_2.get(i.dtor)(o,i.b):i.a=o}};return s.original=i,s}function dt(n,e,t){M._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h978831c3e4267bae(n,e,x(t))}let ye=128;function bt(n){if(ye==1)throw new Error("out of js stack");return V[--ye]=n,ye}function z(n,e){try{return n.apply(this,e)}catch(t){M.__wbindgen_exn_store(x(t))}}function pt(n,e,t,r){M.wasm_bindgen__convert__closures__invoke2_mut__h04dd8e5622e8fd43(n,e,x(t),x(r))}class ke{static __wrap(e){e=e>>>0;const t=Object.create(ke.prototype);return t.__wbg_ptr=e,t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();M.__wbg_randomaccessmidiplayer_free(e)}constructor(e){const t=M.randomaccessmidiplayer_new(x(e));return be(t)}num_bars(){return M.randomaccessmidiplayer_num_bars(this.__wbg_ptr)>>>0}render_ahead_time(){return M.randomaccessmidiplayer_render_ahead_time(this.__wbg_ptr)}set_render_ahead_time(e){M.randomaccessmidiplayer_set_render_ahead_time(this.__wbg_ptr,e)}time_per_pixel(e,t){return M.randomaccessmidiplayer_time_per_pixel(this.__wbg_ptr,e,t)}current_bar(){return M.randomaccessmidiplayer_current_bar(this.__wbg_ptr)>>>0}start(){M.randomaccessmidiplayer_start(this.__wbg_ptr)}set_loop_region(e,t){M.randomaccessmidiplayer_set_loop_region(this.__wbg_ptr,e,t)}seek_at_bar(e,t){M.randomaccessmidiplayer_seek_at_bar(this.__wbg_ptr,e,t)}seek_at_time(e,t){M.randomaccessmidiplayer_seek_at_time(this.__wbg_ptr,e,t)}skip(e,t){M.randomaccessmidiplayer_skip(this.__wbg_ptr,e,t)}stop(){M.randomaccessmidiplayer_stop(this.__wbg_ptr)}tick(e){M.randomaccessmidiplayer_tick(this.__wbg_ptr,e)}is_playing(){return M.randomaccessmidiplayer_is_playing(this.__wbg_ptr)!==0}draw(e,t,r,i,s){try{const l=M.__wbindgen_add_to_stack_pointer(-16);M.randomaccessmidiplayer_draw(l,this.__wbg_ptr,bt(e),t,r,i,s);var a=ve()[l/4+0],o=ve()[l/4+1];if(o)throw be(a)}finally{M.__wbindgen_add_to_stack_pointer(16),V[ye++]=void 0}}}async function gt(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function mt(){const n={};return n.wbg={},n.wbg.__wbindgen_object_drop_ref=function(e){be(e)},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(G(e,t));return x(r)},n.wbg.__wbindgen_string_new=function(e,t){const r=G(e,t);return x(r)},n.wbg.__wbg_randomaccessmidiplayer_new=function(e){const t=ke.__wrap(e);return x(t)},n.wbg.__wbg_setstrokeStyle_1b4551387606453b=function(e,t){f(e).strokeStyle=f(t)},n.wbg.__wbg_setfillStyle_1ebd7d8f502888fa=function(e,t){f(e).fillStyle=f(t)},n.wbg.__wbg_setfont_a622e8f71fcc67bd=function(e,t,r){f(e).font=G(t,r)},n.wbg.__wbg_settextAlign_425d121bce67eea6=function(e,t,r){f(e).textAlign=G(t,r)},n.wbg.__wbg_settextBaseline_ff6ae71131150241=function(e,t,r){f(e).textBaseline=G(t,r)},n.wbg.__wbg_beginPath_5c4c10cc904edc64=function(e){f(e).beginPath()},n.wbg.__wbg_fill_854920f07573dffd=function(e){f(e).fill()},n.wbg.__wbg_stroke_d6cd6e7c98952ff8=function(e){f(e).stroke()},n.wbg.__wbg_lineTo_ef21aebc726bbda0=function(e,t,r){f(e).lineTo(t,r)},n.wbg.__wbg_moveTo_23c53eed282c0730=function(e,t,r){f(e).moveTo(t,r)},n.wbg.__wbg_roundRect_5bc558db0fe10790=function(){return z(function(e,t,r,i,s,a){f(e).roundRect(t,r,i,s,a)},arguments)},n.wbg.__wbg_clearRect_d976768ba14de6f9=function(e,t,r,i,s){f(e).clearRect(t,r,i,s)},n.wbg.__wbg_fillRect_ae135cf52671cb3d=function(e,t,r,i,s){f(e).fillRect(t,r,i,s)},n.wbg.__wbg_strokeRect_eb3d071a52abca07=function(e,t,r,i,s){f(e).strokeRect(t,r,i,s)},n.wbg.__wbg_strokeText_a4c0b8e18d53ea7f=function(){return z(function(e,t,r,i,s){f(e).strokeText(G(t,r),i,s)},arguments)},n.wbg.__wbg_connect_7374783233c39eda=function(){return z(function(e,t){const r=f(e).connect(f(t));return x(r)},arguments)},n.wbg.__wbg_disconnect_13e3b9054333eb88=function(){return z(function(e){f(e).disconnect()},arguments)},n.wbg.__wbg_gain_ea4961e006680142=function(e){const t=f(e).gain;return x(t)},n.wbg.__wbg_arrayBuffer_a9d862b05aaee2f9=function(e){const t=f(e).arrayBuffer();return x(t)},n.wbg.__wbg_threshold_3334a9415a751f8f=function(e){const t=f(e).threshold;return x(t)},n.wbg.__wbg_knee_26a66de96fcff3d9=function(e){const t=f(e).knee;return x(t)},n.wbg.__wbg_ratio_bf0caf07ef32a1b1=function(e){const t=f(e).ratio;return x(t)},n.wbg.__wbg_destination_4d44007f7d08d71b=function(e){const t=f(e).destination;return x(t)},n.wbg.__wbg_currentTime_d2be936586614ff4=function(e){return f(e).currentTime},n.wbg.__wbg_new_db252a952beaf4fa=function(){return z(function(){const e=new lt;return x(e)},arguments)},n.wbg.__wbg_close_b87bff143de234d5=function(){return z(function(e){const t=f(e).close();return x(t)},arguments)},n.wbg.__wbg_createDynamicsCompressor_831f19de62047bce=function(){return z(function(e){const t=f(e).createDynamicsCompressor();return x(t)},arguments)},n.wbg.__wbg_createGain_c702b552853e1a86=function(){return z(function(e){const t=f(e).createGain();return x(t)},arguments)},n.wbg.__wbg_createOscillator_33e2fb4cedf63575=function(){return z(function(e){const t=f(e).createOscillator();return x(t)},arguments)},n.wbg.__wbg_value_d7acd600733d8062=function(e){return f(e).value},n.wbg.__wbg_setvalue_6d68fd7da7d604f9=function(e,t){f(e).value=t},n.wbg.__wbg_exponentialRampToValueAtTime_5cdafb7091d2faf6=function(){return z(function(e,t,r){const i=f(e).exponentialRampToValueAtTime(t,r);return x(i)},arguments)},n.wbg.__wbg_linearRampToValueAtTime_d7663013272d6c74=function(){return z(function(e,t,r){const i=f(e).linearRampToValueAtTime(t,r);return x(i)},arguments)},n.wbg.__wbg_setTargetAtTime_70ccc68d17235e73=function(){return z(function(e,t,r,i){const s=f(e).setTargetAtTime(t,r,i);return x(s)},arguments)},n.wbg.__wbg_setValueAtTime_6460f895778e5046=function(){return z(function(e,t,r){const i=f(e).setValueAtTime(t,r);return x(i)},arguments)},n.wbg.__wbg_settype_523bfbd496f822de=function(e,t){f(e).type=be(t)},n.wbg.__wbg_frequency_2dccb3ae0f823e46=function(e){const t=f(e).frequency;return x(t)},n.wbg.__wbg_start_58f106eeea44565c=function(){return z(function(e,t){f(e).start(t)},arguments)},n.wbg.__wbindgen_cb_drop=function(e){const t=be(e).original;return t.cnt--==1?(t.a=0,!0):!1},n.wbg.__wbg_queueMicrotask_4d890031a6a5a50c=function(e){queueMicrotask(f(e))},n.wbg.__wbg_queueMicrotask_adae4bc085237231=function(e){const t=f(e).queueMicrotask;return x(t)},n.wbg.__wbindgen_is_function=function(e){return typeof f(e)=="function"},n.wbg.__wbg_newnoargs_c62ea9419c21fbac=function(e,t){const r=new Function(G(e,t));return x(r)},n.wbg.__wbg_call_90c26b09837aba1c=function(){return z(function(e,t){const r=f(e).call(f(t));return x(r)},arguments)},n.wbg.__wbg_self_f0e34d89f33b99fd=function(){return z(function(){const e=self.self;return x(e)},arguments)},n.wbg.__wbg_window_d3b084224f4774d7=function(){return z(function(){const e=window.window;return x(e)},arguments)},n.wbg.__wbg_globalThis_9caa27ff917c6860=function(){return z(function(){const e=globalThis.globalThis;return x(e)},arguments)},n.wbg.__wbg_global_35dfdd59a4da3e74=function(){return z(function(){const e=global.global;return x(e)},arguments)},n.wbg.__wbindgen_is_undefined=function(e){return f(e)===void 0},n.wbg.__wbg_call_5da1969d7cd31ccd=function(){return z(function(e,t,r){const i=f(e).call(f(t),f(r));return x(i)},arguments)},n.wbg.__wbg_new_60f57089c7563e81=function(e,t){try{var r={a:e,b:t},i=(a,o)=>{const l=r.a;r.a=0;try{return pt(l,r.b,a,o)}finally{r.a=l}};const s=new Promise(i);return x(s)}finally{r.a=r.b=0}},n.wbg.__wbg_resolve_6e1c6553a82f85b7=function(e){const t=Promise.resolve(f(e));return x(t)},n.wbg.__wbg_then_3ab08cd4fbb91ae9=function(e,t){const r=f(e).then(f(t));return x(r)},n.wbg.__wbg_then_8371cc12cfedc5a2=function(e,t,r){const i=f(e).then(f(t),f(r));return x(i)},n.wbg.__wbg_buffer_a448f833075b71ba=function(e){const t=f(e).buffer;return x(t)},n.wbg.__wbg_new_8f67e318f15d7254=function(e){const t=new Uint8Array(f(e));return x(t)},n.wbg.__wbg_set_2357bf09366ee480=function(e,t,r){f(e).set(f(t),r>>>0)},n.wbg.__wbg_length_1d25fa9e4ac21ce7=function(e){return f(e).length},n.wbg.__wbindgen_object_clone_ref=function(e){const t=f(e);return x(t)},n.wbg.__wbindgen_debug_string=function(e,t){const r=Me(f(t)),i=_t(r,M.__wbindgen_malloc,M.__wbindgen_realloc),s=Pe;ve()[e/4+1]=s,ve()[e/4+0]=i},n.wbg.__wbindgen_throw=function(e,t){throw new Error(G(e,t))},n.wbg.__wbindgen_memory=function(){const e=M.memory;return x(e)},n.wbg.__wbindgen_closure_wrapper584=function(e,t,r){const i=ft(e,t,78,dt);return x(i)},n}function ht(n,e){return M=n.exports,je.__wbindgen_wasm_module=e,fe=null,_e=null,M}async function je(n){if(M!==void 0)return M;typeof n>"u"&&(n=new URL(""+new URL("../assets/t0k0_audio_bg.Kais1vFc.wasm",import.meta.url).href,import.meta.url));const e=mt();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await gt(await n,e);return ht(t,r)}function wt(n){let e,t,r,i={ctx:n,current:null,token:null,hasCatch:!0,pending:Tt,then:kt,catch:vt,value:31,error:32,blocks:[,,,]};return He(t=n[6],i),{c(){e=Re(),i.block.c()},l(s){e=Re(),i.block.l(s)},m(s,a){j(s,e,a),i.block.m(s,i.anchor=a),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(s,a){n=s,i.ctx=n,a[0]&64&&t!==(t=n[6])&&He(t,i)||Ge(i,n,a)},i(s){r||(W(i.block),r=!0)},o(s){for(let a=0;a<3;a+=1){const o=i.blocks[a];F(o)}r=!1},d(s){s&&A(e),i.block.d(s),i.token=null,i=null}}}function yt(n){let e,t="<ruby>練習<rt>れんしゅう</rt>したい</ruby>MIDIファイルを<ruby>開<rt>ひら</rt>いてください</ruby>";return{c(){e=h("p"),e.innerHTML=t},l(r){e=w(r,"P",{"data-svelte-h":!0}),q(e)!=="svelte-174toub"&&(e.innerHTML=t)},m(r,i){j(r,e,i)},p:B,i:B,o:B,d(r){r&&A(e)}}}function vt(n){let e,t=n[32].message+"",r;return{c(){e=h("p"),r=Ie(t),this.h()},l(i){e=w(i,"P",{style:!0});var s=O(e);r=Oe(s,t),s.forEach(A),this.h()},h(){g(e,"color","red")},m(i,s){j(i,e,s),b(e,r)},p(i,s){s[0]&64&&t!==(t=i[32].message+"")&&Ce(r,t)},i:B,o:B,d(i){i&&A(e)}}}function kt(n){let e,t,r,i,s,a,o,l,_,p,u,T,v,k,E,m,I,L,d,P,D,J;t=new Ye({}),t.$on("prevbar",n[19]),t.$on("nextbar",n[20]),t.$on("play",n[16]),t.$on("stop",n[18]),t.$on("pause",n[17]);function Te(y){n[24](y)}let pe={};n[1]!==void 0&&(pe.speed=n[1]),i=new Ze({props:pe}),te.push(()=>ae(i,"speed",Te));function xe(y){n[25](y)}let X={};n[2]!==void 0&&(X.display=n[2]),o=new tt({props:X}),te.push(()=>ae(o,"display",xe));function Ae(y){n[26](y)}function Ee(y){n[27](y)}function Le(y){n[28](y)}let Z={};return n[3]!==void 0&&(Z.enable=n[3]),n[4]!==void 0&&(Z.begin=n[4]),n[5]!==void 0&&(Z.end=n[5]),p=new it({props:Z}),te.push(()=>ae(p,"enable",Ae)),te.push(()=>ae(p,"begin",Ee)),te.push(()=>ae(p,"end",Le)),m=new ot({props:{value:n[7],max:n[8]}}),m.$on("input",n[10]),{c(){e=h("div"),oe(t.$$.fragment),r=N(),oe(i.$$.fragment),a=N(),oe(o.$$.fragment),_=N(),oe(p.$$.fragment),k=N(),E=h("div"),oe(m.$$.fragment),I=N(),L=h("div"),d=h("canvas"),this.h()},l(y){e=w(y,"DIV",{style:!0});var C=O(e);le(t.$$.fragment,C),r=R(C),le(i.$$.fragment,C),a=R(C),le(o.$$.fragment,C),_=R(C),le(p.$$.fragment,C),C.forEach(A),k=R(y),E=w(y,"DIV",{style:!0});var K=O(E);le(m.$$.fragment,K),K.forEach(A),I=R(y),L=w(y,"DIV",{style:!0});var S=O(L);d=w(S,"CANVAS",{id:!0,style:!0}),O(d).forEach(A),S.forEach(A),this.h()},h(){g(e,"width","100%"),g(e,"display","flex"),g(e,"flex-direction","row"),g(e,"justify-content","space-evenly"),g(e,"align-items","center"),g(E,"width","95%"),c(d,"id","canvas"),g(d,"width","96%"),g(d,"height","96%"),g(d,"left","2%"),g(d,"top","2%"),g(d,"position","relative"),g(d,"touch-action","pan-y"),g(d,"touch-action","pan-x"),g(L,"flex-grow","1"),g(L,"width","100%")},m(y,C){j(y,e,C),ue(t,e,null),b(e,r),ue(i,e,null),b(e,a),ue(o,e,null),b(e,_),ue(p,e,null),j(y,k,C),j(y,E,C),ue(m,E,null),j(y,I,C),j(y,L,C),b(L,d),n[29](d),P=!0,D||(J=[H(d,"pointerdown",me(n[12])),H(d,"pointermove",me(n[13])),H(d,"pointerup",me(n[14])),H(d,"pointercancel",me(n[15]))],D=!0)},p(y,C){const K={};!s&&C[0]&2&&(s=!0,K.speed=y[1],se(()=>s=!1)),i.$set(K);const S={};!l&&C[0]&4&&(l=!0,S.display=y[2],se(()=>l=!1)),o.$set(S);const $={};!u&&C[0]&8&&(u=!0,$.enable=y[3],se(()=>u=!1)),!T&&C[0]&16&&(T=!0,$.begin=y[4],se(()=>T=!1)),!v&&C[0]&32&&(v=!0,$.end=y[5],se(()=>v=!1)),p.$set($);const ee={};C[0]&128&&(ee.value=y[7]),C[0]&256&&(ee.max=y[8]),m.$set(ee)},i(y){P||(W(t.$$.fragment,y),W(i.$$.fragment,y),W(o.$$.fragment,y),W(p.$$.fragment,y),W(m.$$.fragment,y),P=!0)},o(y){F(t.$$.fragment,y),F(i.$$.fragment,y),F(o.$$.fragment,y),F(p.$$.fragment,y),F(m.$$.fragment,y),P=!1},d(y){y&&(A(e),A(k),A(E),A(I),A(L)),ce(t),ce(i),ce(o),ce(p),ce(m),n[29](null),D=!1,Q(J)}}}function Tt(n){let e,t="MIDIファイルを<ruby>開<rt>ひら</rt>いています</ruby>........";return{c(){e=h("p"),e.innerHTML=t},l(r){e=w(r,"P",{"data-svelte-h":!0}),q(e)!=="svelte-b1iy1"&&(e.innerHTML=t)},m(r,i){j(r,e,i)},p:B,i:B,o:B,d(r){r&&A(e)}}}function xt(n){let e,t,r,i,s,a,o,l,_,p,u,T,v,k;const E=[yt,wt],m=[];function I(L,d){return L[6]==null?0:1}return p=I(n),u=m[p]=E[p](n),{c(){e=h("div"),t=N(),r=h("div"),i=h("input"),s=N(),a=h("button"),o=h("span"),l=Ie(n[9]),_=N(),u.c(),this.h()},l(L){e=w(L,"DIV",{id:!0,class:!0});var d=O(e);t=R(d),r=w(d,"DIV",{style:!0});var P=O(r);i=w(P,"INPUT",{type:!0,id:!0,name:!0,accept:!0,style:!0}),P.forEach(A),s=R(d),a=w(d,"BUTTON",{id:!0,class:!0});var D=O(a);o=w(D,"SPAN",{class:!0});var J=O(o);l=Oe(J,n[9]),J.forEach(A),D.forEach(A),_=R(d),u.l(d),d.forEach(A),this.h()},h(){c(i,"type","file"),c(i,"id","midi-open"),c(i,"name","midi-open"),c(i,"accept",".mid"),g(i,"font-size","24px"),g(r,"padding","4px"),c(o,"class","material-symbols-outlined svelte-nanmym"),c(a,"id","fullscreen-button"),c(a,"class","svelte-nanmym"),c(e,"id","frame"),c(e,"class","svelte-nanmym")},m(L,d){j(L,e,d),b(e,t),b(e,r),b(r,i),b(e,s),b(e,a),b(a,o),b(o,l),b(e,_),m[p].m(e,null),T=!0,v||(k=[H(i,"change",n[11]),H(a,"click",n[21])],v=!0)},p(L,d){(!T||d[0]&512)&&Ce(l,L[9]);let P=p;p=I(L),p===P?m[p].p(L,d):(Be(),F(m[P],1,1,()=>{m[P]=null}),De(),u=m[p],u?u.p(L,d):(u=m[p]=E[p](L),u.c()),W(u,1),u.m(e,null))},i(L){T||(W(u),T=!0)},o(L){F(u),T=!1},d(L){L&&A(e),m[p].d(),v=!1,Q(k)}}}function At(n,e,t){let r=null,i=null,s=null,a=!1,o=!1,l=1,_=3,p=0,u=100,T=!1,v=1,k=1;function E(S){t(7,p=S.detail.value),r.seek_at_bar(p,!0)}We(async()=>{await je()});async function m(){this.files.length>0&&(r&&(r.stop(),r.free(),t(22,r=null)),t(6,i=new ke(this.files[0])),t(22,r=await i),t(8,u=r.num_bars()-1))}function I(){r&&(a=!0)}function L(S){a&&r.skip(S.movementY*r.time_per_pixel(0,s.height))}function d(){a&&(a=!1)}function P(){a&&(a=!1)}function D(){r&&r.is_playing()===!1&&r.start()}function J(){r&&r.is_playing()&&r.stop()}function Te(){r&&(r.is_playing()&&r.stop(),r.seek_at_bar(0,!0))}function pe(){r&&r.current_bar()>0&&r.seek_at_bar(r.current_bar()-1,!0)}function xe(){r&&r.seek_at_bar(r.current_bar()+1,!0)}let X="fullscreen";function Ae(){document.fullscreenElement?(document.exitFullscreen(),t(9,X="fullscreen")):(document.body.requestFullscreen(),t(9,X="fullscreen_Exit"))}function Ee(S){l=S,t(1,l)}function Le(S){_=S,t(2,_)}function Z(S){T=S,t(3,T)}function y(S){v=S,t(4,v)}function C(S){k=S,t(5,k)}function K(S){te[S?"unshift":"push"](()=>{s=S,t(0,s),t(23,o),t(22,r),t(1,l)})}return n.$$.update=()=>{if(n.$$.dirty[0]&12582915)if(s){if(o===!1){new ResizeObserver(Se=>{t(0,s.width=Se[0].contentRect.width,s),t(0,s.height=Se[0].contentRect.height,s)}).observe(s);const $=s.getContext("2d"),ee=()=>{r&&s&&(r.tick(l),t(7,p=r.current_bar()),r.draw($,0,0,s.width,s.height)),s&&requestAnimationFrame(ee)};requestAnimationFrame(ee),t(23,o=!0)}}else t(23,o=!1);n.$$.dirty[0]&4194360&&r&&(T?r.set_loop_region(v-1,k-1):r.set_loop_region(0,0)),n.$$.dirty[0]&4194308&&r&&r.set_render_ahead_time(_)},[s,l,_,T,v,k,i,p,u,X,E,m,I,L,d,P,D,J,Te,pe,xe,Ae,r,o,Ee,Le,Z,y,C,K]}class Mt extends re{constructor(e){super(),ie(this,e,At,xt,ne,{},null,[-1,-1])}}export{Mt as component};
